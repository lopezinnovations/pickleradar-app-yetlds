{"dependencies":[{"name":"micromark-factory-space","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":146},"end":{"line":12,"column":55,"index":201}}],"key":"6ebRLQUlaf+3pDntbvl8YRZLcDM=","exportNames":["*"],"imports":1}},{"name":"micromark-util-character","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":202},"end":{"line":13,"column":77,"index":279}}],"key":"svVs0p+xNPi/kEX20rLm/snhtB4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"setextUnderline\", {\n    enumerable: true,\n    get: function () {\n      return setextUnderline;\n    }\n  });\n  var _micromarkFactorySpace = require(_dependencyMap[0], \"micromark-factory-space\");\n  var _micromarkUtilCharacter = require(_dependencyMap[1], \"micromark-util-character\");\n  /**\n   * @import {\n   *   Code,\n   *   Construct,\n   *   Resolver,\n   *   State,\n   *   TokenizeContext,\n   *   Tokenizer\n   * } from 'micromark-util-types'\n   */\n\n  /** @type {Construct} */\n  const setextUnderline = {\n    name: 'setextUnderline',\n    resolveTo: resolveToSetextUnderline,\n    tokenize: tokenizeSetextUnderline\n  };\n\n  /** @type {Resolver} */\n  function resolveToSetextUnderline(events, context) {\n    // To do: resolve like `markdown-rs`.\n    let index = events.length;\n    /** @type {number | undefined} */\n    let content;\n    /** @type {number | undefined} */\n    let text;\n    /** @type {number | undefined} */\n    let definition;\n\n    // Find the opening of the content.\n    // It’ll always exist: we don’t tokenize if it isn’t there.\n    while (index--) {\n      if (events[index][0] === 'enter') {\n        if (events[index][1].type === \"content\") {\n          content = index;\n          break;\n        }\n        if (events[index][1].type === \"paragraph\") {\n          text = index;\n        }\n      }\n      // Exit\n      else {\n        if (events[index][1].type === \"content\") {\n          // Remove the content end (if needed we’ll add it later)\n          events.splice(index, 1);\n        }\n        if (!definition && events[index][1].type === \"definition\") {\n          definition = index;\n        }\n      }\n    }\n    const heading = {\n      type: \"setextHeading\",\n      start: {\n        ...events[content][1].start\n      },\n      end: {\n        ...events[events.length - 1][1].end\n      }\n    };\n\n    // Change the paragraph to setext heading text.\n    events[text][1].type = \"setextHeadingText\";\n\n    // If we have definitions in the content, we’ll keep on having content,\n    // but we need move it.\n    if (definition) {\n      events.splice(text, 0, ['enter', heading, context]);\n      events.splice(definition + 1, 0, ['exit', events[content][1], context]);\n      events[content][1].end = {\n        ...events[definition][1].end\n      };\n    } else {\n      events[content][1] = heading;\n    }\n\n    // Add the heading exit at the end.\n    events.push(['exit', heading, context]);\n    return events;\n  }\n\n  /**\n   * @this {TokenizeContext}\n   *   Context.\n   * @type {Tokenizer}\n   */\n  function tokenizeSetextUnderline(effects, ok, nok) {\n    const self = this;\n    /** @type {NonNullable<Code>} */\n    let marker;\n    return start;\n\n    /**\n     * At start of heading (setext) underline.\n     *\n     * ```markdown\n     *   | aa\n     * > | ==\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function start(code) {\n      let index = self.events.length;\n      /** @type {boolean | undefined} */\n      let paragraph;\n      // Find an opening.\n      while (index--) {\n        // Skip enter/exit of line ending, line prefix, and content.\n        // We can now either have a definition or a paragraph.\n        if (self.events[index][1].type !== \"lineEnding\" && self.events[index][1].type !== \"linePrefix\" && self.events[index][1].type !== \"content\") {\n          paragraph = self.events[index][1].type === \"paragraph\";\n          break;\n        }\n      }\n\n      // To do: handle lazy/pierce like `markdown-rs`.\n      // To do: parse indent like `markdown-rs`.\n      if (!self.parser.lazy[self.now().line] && (self.interrupt || paragraph)) {\n        effects.enter(\"setextHeadingLine\");\n        marker = code;\n        return before(code);\n      }\n      return nok(code);\n    }\n\n    /**\n     * After optional whitespace, at `-` or `=`.\n     *\n     * ```markdown\n     *   | aa\n     * > | ==\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function before(code) {\n      effects.enter(\"setextHeadingLineSequence\");\n      return inside(code);\n    }\n\n    /**\n     * In sequence.\n     *\n     * ```markdown\n     *   | aa\n     * > | ==\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function inside(code) {\n      if (code === marker) {\n        effects.consume(code);\n        return inside;\n      }\n      effects.exit(\"setextHeadingLineSequence\");\n      return (0, _micromarkUtilCharacter.markdownSpace)(code) ? (0, _micromarkFactorySpace.factorySpace)(effects, after, \"lineSuffix\")(code) : after(code);\n    }\n\n    /**\n     * After sequence, after optional whitespace.\n     *\n     * ```markdown\n     *   | aa\n     * > | ==\n     *       ^\n     * ```\n     *\n     * @type {State}\n     */\n    function after(code) {\n      if (code === null || (0, _micromarkUtilCharacter.markdownLineEnding)(code)) {\n        effects.exit(\"setextHeadingLine\");\n        return ok(code);\n      }\n      return nok(code);\n    }\n  }\n});","lineCount":198,"map":[[7,2,15,0,"Object"],[7,8,15,0],[7,9,15,0,"defineProperty"],[7,23,15,0],[7,24,15,0,"exports"],[7,31,15,0],[8,4,15,0,"enumerable"],[8,14,15,0],[9,4,15,0,"get"],[9,7,15,0],[9,18,15,0,"get"],[9,19,15,0],[10,6,15,0],[10,13,15,0,"setextUnderline"],[10,28,15,0],[11,4,15,0],[12,2,15,0],[13,2,12,0],[13,6,12,0,"_micromarkFactorySpace"],[13,28,12,0],[13,31,12,0,"require"],[13,38,12,0],[13,39,12,0,"_dependencyMap"],[13,53,12,0],[14,2,13,0],[14,6,13,0,"_micromarkUtilCharacter"],[14,29,13,0],[14,32,13,0,"require"],[14,39,13,0],[14,40,13,0,"_dependencyMap"],[14,54,13,0],[15,2,1,0],[16,0,2,0],[17,0,3,0],[18,0,4,0],[19,0,5,0],[20,0,6,0],[21,0,7,0],[22,0,8,0],[23,0,9,0],[24,0,10,0],[26,2,14,0],[27,2,15,7],[27,8,15,13,"setextUnderline"],[27,23,15,28],[27,26,15,31],[28,4,16,2,"name"],[28,8,16,6],[28,10,16,8],[28,27,16,25],[29,4,17,2,"resolveTo"],[29,13,17,11],[29,15,17,13,"resolveToSetextUnderline"],[29,39,17,37],[30,4,18,2,"tokenize"],[30,12,18,10],[30,14,18,12,"tokenizeSetextUnderline"],[31,2,19,0],[31,3,19,1],[33,2,21,0],[34,2,22,0],[34,11,22,9,"resolveToSetextUnderline"],[34,35,22,33,"resolveToSetextUnderline"],[34,36,22,34,"events"],[34,42,22,40],[34,44,22,42,"context"],[34,51,22,49],[34,53,22,51],[35,4,23,2],[36,4,24,2],[36,8,24,6,"index"],[36,13,24,11],[36,16,24,14,"events"],[36,22,24,20],[36,23,24,21,"length"],[36,29,24,27],[37,4,25,2],[38,4,26,2],[38,8,26,6,"content"],[38,15,26,13],[39,4,27,2],[40,4,28,2],[40,8,28,6,"text"],[40,12,28,10],[41,4,29,2],[42,4,30,2],[42,8,30,6,"definition"],[42,18,30,16],[44,4,32,2],[45,4,33,2],[46,4,34,2],[46,11,34,9,"index"],[46,16,34,14],[46,18,34,16],[46,20,34,18],[47,6,35,4],[47,10,35,8,"events"],[47,16,35,14],[47,17,35,15,"index"],[47,22,35,20],[47,23,35,21],[47,24,35,22],[47,25,35,23],[47,26,35,24],[47,31,35,29],[47,38,35,36],[47,40,35,38],[48,8,36,6],[48,12,36,10,"events"],[48,18,36,16],[48,19,36,17,"index"],[48,24,36,22],[48,25,36,23],[48,26,36,24],[48,27,36,25],[48,28,36,26],[48,29,36,27,"type"],[48,33,36,31],[48,38,36,36],[48,47,36,45],[48,49,36,47],[49,10,37,8,"content"],[49,17,37,15],[49,20,37,18,"index"],[49,25,37,23],[50,10,38,8],[51,8,39,6],[52,8,40,6],[52,12,40,10,"events"],[52,18,40,16],[52,19,40,17,"index"],[52,24,40,22],[52,25,40,23],[52,26,40,24],[52,27,40,25],[52,28,40,26],[52,29,40,27,"type"],[52,33,40,31],[52,38,40,36],[52,49,40,47],[52,51,40,49],[53,10,41,8,"text"],[53,14,41,12],[53,17,41,15,"index"],[53,22,41,20],[54,8,42,6],[55,6,43,4],[56,6,44,4],[57,6,44,4],[57,11,45,9],[58,8,46,6],[58,12,46,10,"events"],[58,18,46,16],[58,19,46,17,"index"],[58,24,46,22],[58,25,46,23],[58,26,46,24],[58,27,46,25],[58,28,46,26],[58,29,46,27,"type"],[58,33,46,31],[58,38,46,36],[58,47,46,45],[58,49,46,47],[59,10,47,8],[60,10,48,8,"events"],[60,16,48,14],[60,17,48,15,"splice"],[60,23,48,21],[60,24,48,22,"index"],[60,29,48,27],[60,31,48,29],[60,32,48,30],[60,33,48,31],[61,8,49,6],[62,8,50,6],[62,12,50,10],[62,13,50,11,"definition"],[62,23,50,21],[62,27,50,25,"events"],[62,33,50,31],[62,34,50,32,"index"],[62,39,50,37],[62,40,50,38],[62,41,50,39],[62,42,50,40],[62,43,50,41],[62,44,50,42,"type"],[62,48,50,46],[62,53,50,51],[62,65,50,63],[62,67,50,65],[63,10,51,8,"definition"],[63,20,51,18],[63,23,51,21,"index"],[63,28,51,26],[64,8,52,6],[65,6,53,4],[66,4,54,2],[67,4,55,2],[67,10,55,8,"heading"],[67,17,55,15],[67,20,55,18],[68,6,56,4,"type"],[68,10,56,8],[68,12,56,10],[68,27,56,25],[69,6,57,4,"start"],[69,11,57,9],[69,13,57,11],[70,8,58,6],[70,11,58,9,"events"],[70,17,58,15],[70,18,58,16,"content"],[70,25,58,23],[70,26,58,24],[70,27,58,25],[70,28,58,26],[70,29,58,27],[70,30,58,28,"start"],[71,6,59,4],[71,7,59,5],[72,6,60,4,"end"],[72,9,60,7],[72,11,60,9],[73,8,61,6],[73,11,61,9,"events"],[73,17,61,15],[73,18,61,16,"events"],[73,24,61,22],[73,25,61,23,"length"],[73,31,61,29],[73,34,61,32],[73,35,61,33],[73,36,61,34],[73,37,61,35],[73,38,61,36],[73,39,61,37],[73,40,61,38,"end"],[74,6,62,4],[75,4,63,2],[75,5,63,3],[77,4,65,2],[78,4,66,2,"events"],[78,10,66,8],[78,11,66,9,"text"],[78,15,66,13],[78,16,66,14],[78,17,66,15],[78,18,66,16],[78,19,66,17],[78,20,66,18,"type"],[78,24,66,22],[78,27,66,25],[78,46,66,44],[80,4,68,2],[81,4,69,2],[82,4,70,2],[82,8,70,6,"definition"],[82,18,70,16],[82,20,70,18],[83,6,71,4,"events"],[83,12,71,10],[83,13,71,11,"splice"],[83,19,71,17],[83,20,71,18,"text"],[83,24,71,22],[83,26,71,24],[83,27,71,25],[83,29,71,27],[83,30,71,28],[83,37,71,35],[83,39,71,37,"heading"],[83,46,71,44],[83,48,71,46,"context"],[83,55,71,53],[83,56,71,54],[83,57,71,55],[84,6,72,4,"events"],[84,12,72,10],[84,13,72,11,"splice"],[84,19,72,17],[84,20,72,18,"definition"],[84,30,72,28],[84,33,72,31],[84,34,72,32],[84,36,72,34],[84,37,72,35],[84,39,72,37],[84,40,72,38],[84,46,72,44],[84,48,72,46,"events"],[84,54,72,52],[84,55,72,53,"content"],[84,62,72,60],[84,63,72,61],[84,64,72,62],[84,65,72,63],[84,66,72,64],[84,68,72,66,"context"],[84,75,72,73],[84,76,72,74],[84,77,72,75],[85,6,73,4,"events"],[85,12,73,10],[85,13,73,11,"content"],[85,20,73,18],[85,21,73,19],[85,22,73,20],[85,23,73,21],[85,24,73,22],[85,25,73,23,"end"],[85,28,73,26],[85,31,73,29],[86,8,74,6],[86,11,74,9,"events"],[86,17,74,15],[86,18,74,16,"definition"],[86,28,74,26],[86,29,74,27],[86,30,74,28],[86,31,74,29],[86,32,74,30],[86,33,74,31,"end"],[87,6,75,4],[87,7,75,5],[88,4,76,2],[88,5,76,3],[88,11,76,9],[89,6,77,4,"events"],[89,12,77,10],[89,13,77,11,"content"],[89,20,77,18],[89,21,77,19],[89,22,77,20],[89,23,77,21],[89,24,77,22],[89,27,77,25,"heading"],[89,34,77,32],[90,4,78,2],[92,4,80,2],[93,4,81,2,"events"],[93,10,81,8],[93,11,81,9,"push"],[93,15,81,13],[93,16,81,14],[93,17,81,15],[93,23,81,21],[93,25,81,23,"heading"],[93,32,81,30],[93,34,81,32,"context"],[93,41,81,39],[93,42,81,40],[93,43,81,41],[94,4,82,2],[94,11,82,9,"events"],[94,17,82,15],[95,2,83,0],[97,2,85,0],[98,0,86,0],[99,0,87,0],[100,0,88,0],[101,0,89,0],[102,2,90,0],[102,11,90,9,"tokenizeSetextUnderline"],[102,34,90,32,"tokenizeSetextUnderline"],[102,35,90,33,"effects"],[102,42,90,40],[102,44,90,42,"ok"],[102,46,90,44],[102,48,90,46,"nok"],[102,51,90,49],[102,53,90,51],[103,4,91,2],[103,10,91,8,"self"],[103,14,91,12],[103,17,91,15],[103,21,91,19],[104,4,92,2],[105,4,93,2],[105,8,93,6,"marker"],[105,14,93,12],[106,4,94,2],[106,11,94,9,"start"],[106,16,94,14],[108,4,96,2],[109,0,97,0],[110,0,98,0],[111,0,99,0],[112,0,100,0],[113,0,101,0],[114,0,102,0],[115,0,103,0],[116,0,104,0],[117,0,105,0],[118,0,106,0],[119,4,107,2],[119,13,107,11,"start"],[119,18,107,16,"start"],[119,19,107,17,"code"],[119,23,107,21],[119,25,107,23],[120,6,108,4],[120,10,108,8,"index"],[120,15,108,13],[120,18,108,16,"self"],[120,22,108,20],[120,23,108,21,"events"],[120,29,108,27],[120,30,108,28,"length"],[120,36,108,34],[121,6,109,4],[122,6,110,4],[122,10,110,8,"paragraph"],[122,19,110,17],[123,6,111,4],[124,6,112,4],[124,13,112,11,"index"],[124,18,112,16],[124,20,112,18],[124,22,112,20],[125,8,113,6],[126,8,114,6],[127,8,115,6],[127,12,115,10,"self"],[127,16,115,14],[127,17,115,15,"events"],[127,23,115,21],[127,24,115,22,"index"],[127,29,115,27],[127,30,115,28],[127,31,115,29],[127,32,115,30],[127,33,115,31],[127,34,115,32,"type"],[127,38,115,36],[127,43,115,41],[127,55,115,53],[127,59,115,57,"self"],[127,63,115,61],[127,64,115,62,"events"],[127,70,115,68],[127,71,115,69,"index"],[127,76,115,74],[127,77,115,75],[127,78,115,76],[127,79,115,77],[127,80,115,78],[127,81,115,79,"type"],[127,85,115,83],[127,90,115,88],[127,102,115,100],[127,106,115,104,"self"],[127,110,115,108],[127,111,115,109,"events"],[127,117,115,115],[127,118,115,116,"index"],[127,123,115,121],[127,124,115,122],[127,125,115,123],[127,126,115,124],[127,127,115,125],[127,128,115,126,"type"],[127,132,115,130],[127,137,115,135],[127,146,115,144],[127,148,115,146],[128,10,116,8,"paragraph"],[128,19,116,17],[128,22,116,20,"self"],[128,26,116,24],[128,27,116,25,"events"],[128,33,116,31],[128,34,116,32,"index"],[128,39,116,37],[128,40,116,38],[128,41,116,39],[128,42,116,40],[128,43,116,41],[128,44,116,42,"type"],[128,48,116,46],[128,53,116,51],[128,64,116,62],[129,10,117,8],[130,8,118,6],[131,6,119,4],[133,6,121,4],[134,6,122,4],[135,6,123,4],[135,10,123,8],[135,11,123,9,"self"],[135,15,123,13],[135,16,123,14,"parser"],[135,22,123,20],[135,23,123,21,"lazy"],[135,27,123,25],[135,28,123,26,"self"],[135,32,123,30],[135,33,123,31,"now"],[135,36,123,34],[135,37,123,35],[135,38,123,36],[135,39,123,37,"line"],[135,43,123,41],[135,44,123,42],[135,49,123,47,"self"],[135,53,123,51],[135,54,123,52,"interrupt"],[135,63,123,61],[135,67,123,65,"paragraph"],[135,76,123,74],[135,77,123,75],[135,79,123,77],[136,8,124,6,"effects"],[136,15,124,13],[136,16,124,14,"enter"],[136,21,124,19],[136,22,124,20],[136,41,124,39],[136,42,124,40],[137,8,125,6,"marker"],[137,14,125,12],[137,17,125,15,"code"],[137,21,125,19],[138,8,126,6],[138,15,126,13,"before"],[138,21,126,19],[138,22,126,20,"code"],[138,26,126,24],[138,27,126,25],[139,6,127,4],[140,6,128,4],[140,13,128,11,"nok"],[140,16,128,14],[140,17,128,15,"code"],[140,21,128,19],[140,22,128,20],[141,4,129,2],[143,4,131,2],[144,0,132,0],[145,0,133,0],[146,0,134,0],[147,0,135,0],[148,0,136,0],[149,0,137,0],[150,0,138,0],[151,0,139,0],[152,0,140,0],[153,0,141,0],[154,4,142,2],[154,13,142,11,"before"],[154,19,142,17,"before"],[154,20,142,18,"code"],[154,24,142,22],[154,26,142,24],[155,6,143,4,"effects"],[155,13,143,11],[155,14,143,12,"enter"],[155,19,143,17],[155,20,143,18],[155,47,143,45],[155,48,143,46],[156,6,144,4],[156,13,144,11,"inside"],[156,19,144,17],[156,20,144,18,"code"],[156,24,144,22],[156,25,144,23],[157,4,145,2],[159,4,147,2],[160,0,148,0],[161,0,149,0],[162,0,150,0],[163,0,151,0],[164,0,152,0],[165,0,153,0],[166,0,154,0],[167,0,155,0],[168,0,156,0],[169,0,157,0],[170,4,158,2],[170,13,158,11,"inside"],[170,19,158,17,"inside"],[170,20,158,18,"code"],[170,24,158,22],[170,26,158,24],[171,6,159,4],[171,10,159,8,"code"],[171,14,159,12],[171,19,159,17,"marker"],[171,25,159,23],[171,27,159,25],[172,8,160,6,"effects"],[172,15,160,13],[172,16,160,14,"consume"],[172,23,160,21],[172,24,160,22,"code"],[172,28,160,26],[172,29,160,27],[173,8,161,6],[173,15,161,13,"inside"],[173,21,161,19],[174,6,162,4],[175,6,163,4,"effects"],[175,13,163,11],[175,14,163,12,"exit"],[175,18,163,16],[175,19,163,17],[175,46,163,44],[175,47,163,45],[176,6,164,4],[176,13,164,11],[176,17,164,11,"markdownSpace"],[176,40,164,24],[176,41,164,24,"markdownSpace"],[176,54,164,24],[176,56,164,25,"code"],[176,60,164,29],[176,61,164,30],[176,64,164,33],[176,68,164,33,"factorySpace"],[176,90,164,45],[176,91,164,45,"factorySpace"],[176,103,164,45],[176,105,164,46,"effects"],[176,112,164,53],[176,114,164,55,"after"],[176,119,164,60],[176,121,164,62],[176,133,164,74],[176,134,164,75],[176,135,164,76,"code"],[176,139,164,80],[176,140,164,81],[176,143,164,84,"after"],[176,148,164,89],[176,149,164,90,"code"],[176,153,164,94],[176,154,164,95],[177,4,165,2],[179,4,167,2],[180,0,168,0],[181,0,169,0],[182,0,170,0],[183,0,171,0],[184,0,172,0],[185,0,173,0],[186,0,174,0],[187,0,175,0],[188,0,176,0],[189,0,177,0],[190,4,178,2],[190,13,178,11,"after"],[190,18,178,16,"after"],[190,19,178,17,"code"],[190,23,178,21],[190,25,178,23],[191,6,179,4],[191,10,179,8,"code"],[191,14,179,12],[191,19,179,17],[191,23,179,21],[191,27,179,25],[191,31,179,25,"markdownLineEnding"],[191,54,179,43],[191,55,179,43,"markdownLineEnding"],[191,73,179,43],[191,75,179,44,"code"],[191,79,179,48],[191,80,179,49],[191,82,179,51],[192,8,180,6,"effects"],[192,15,180,13],[192,16,180,14,"exit"],[192,20,180,18],[192,21,180,19],[192,40,180,38],[192,41,180,39],[193,8,181,6],[193,15,181,13,"ok"],[193,17,181,15],[193,18,181,16,"code"],[193,22,181,20],[193,23,181,21],[194,6,182,4],[195,6,183,4],[195,13,183,11,"nok"],[195,16,183,14],[195,17,183,15,"code"],[195,21,183,19],[195,22,183,20],[196,4,184,2],[197,2,185,0],[198,0,185,1],[198,3]],"functionMap":{"names":["<global>","resolveToSetextUnderline","tokenizeSetextUnderline","start","before","inside","after"],"mappings":"AAA;ACqB;CD6D;AEO;ECiB;GDsB;EEa;GFG;EGa;GHO;EIa;GJM"},"hasCjsExports":false},"type":"js/module"}]}