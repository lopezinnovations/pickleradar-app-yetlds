{"dependencies":[{"name":"micromark-util-character","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":61,"index":61}}],"key":"svVs0p+xNPi/kEX20rLm/snhtB4=","exportNames":["*"],"imports":1}},{"name":"micromark-util-encode","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":62},"end":{"line":2,"column":47,"index":109}}],"key":"yBPy/SUTYkYuJ/r5jIRj8cddHso=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.sanitizeUri = sanitizeUri;\n  exports.normalizeUri = normalizeUri;\n  var _micromarkUtilCharacter = require(_dependencyMap[0], \"micromark-util-character\");\n  var _micromarkUtilEncode = require(_dependencyMap[1], \"micromark-util-encode\");\n  /**\n   * Make a value safe for injection as a URL.\n   *\n   * This encodes unsafe characters with percent-encoding and skips already\n   * encoded sequences (see `normalizeUri`).\n   * Further unsafe characters are encoded as character references (see\n   * `micromark-util-encode`).\n   *\n   * A regex of allowed protocols can be given, in which case the URL is\n   * sanitized.\n   * For example, `/^(https?|ircs?|mailto|xmpp)$/i` can be used for `a[href]`, or\n   * `/^https?$/i` for `img[src]` (this is what `github.com` allows).\n   * If the URL includes an unknown protocol (one not matched by `protocol`, such\n   * as a dangerous example, `javascript:`), the value is ignored.\n   *\n   * @param {string | null | undefined} url\n   *   URI to sanitize.\n   * @param {RegExp | null | undefined} [protocol]\n   *   Allowed protocols.\n   * @returns {string}\n   *   Sanitized URI.\n   */\n  function sanitizeUri(url, protocol) {\n    const value = (0, _micromarkUtilEncode.encode)(normalizeUri(url || ''));\n    if (!protocol) {\n      return value;\n    }\n    const colon = value.indexOf(':');\n    const questionMark = value.indexOf('?');\n    const numberSign = value.indexOf('#');\n    const slash = value.indexOf('/');\n    if (\n    // If there is no protocol, it’s relative.\n    colon < 0 ||\n    // If the first colon is after a `?`, `#`, or `/`, it’s not a protocol.\n    slash > -1 && colon > slash || questionMark > -1 && colon > questionMark || numberSign > -1 && colon > numberSign ||\n    // It is a protocol, it should be allowed.\n    protocol.test(value.slice(0, colon))) {\n      return value;\n    }\n    return '';\n  }\n\n  /**\n   * Normalize a URL.\n   *\n   * Encode unsafe characters with percent-encoding, skipping already encoded\n   * sequences.\n   *\n   * @param {string} value\n   *   URI to normalize.\n   * @returns {string}\n   *   Normalized URI.\n   */\n  function normalizeUri(value) {\n    /** @type {Array<string>} */\n    const result = [];\n    let index = -1;\n    let start = 0;\n    let skip = 0;\n    while (++index < value.length) {\n      const code = value.charCodeAt(index);\n      /** @type {string} */\n      let replace = '';\n\n      // A correct percent encoded value.\n      if (code === 37 && (0, _micromarkUtilCharacter.asciiAlphanumeric)(value.charCodeAt(index + 1)) && (0, _micromarkUtilCharacter.asciiAlphanumeric)(value.charCodeAt(index + 2))) {\n        skip = 2;\n      }\n      // ASCII.\n      else if (code < 128) {\n        if (!/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(code))) {\n          replace = String.fromCharCode(code);\n        }\n      }\n      // Astral.\n      else if (code > 55_295 && code < 57_344) {\n        const next = value.charCodeAt(index + 1);\n\n        // A correct surrogate pair.\n        if (code < 56_320 && next > 56_319 && next < 57_344) {\n          replace = String.fromCharCode(code, next);\n          skip = 1;\n        }\n        // Lone surrogate.\n        else {\n          replace = \"\\uFFFD\";\n        }\n      }\n      // Unicode.\n      else {\n        replace = String.fromCharCode(code);\n      }\n      if (replace) {\n        result.push(value.slice(start, index), encodeURIComponent(replace));\n        start = index + skip + 1;\n        replace = '';\n      }\n      if (skip) {\n        index += skip;\n        skip = 0;\n      }\n    }\n    return result.join('') + value.slice(start);\n  }\n});","lineCount":116,"map":[[7,2,25,0,"exports"],[7,9,25,0],[7,10,25,0,"sanitizeUri"],[7,21,25,0],[7,24,25,0,"sanitizeUri"],[7,35,25,0],[8,2,57,0,"exports"],[8,9,57,0],[8,10,57,0,"normalizeUri"],[8,22,57,0],[8,25,57,0,"normalizeUri"],[8,37,57,0],[9,2,1,0],[9,6,1,0,"_micromarkUtilCharacter"],[9,29,1,0],[9,32,1,0,"require"],[9,39,1,0],[9,40,1,0,"_dependencyMap"],[9,54,1,0],[10,2,2,0],[10,6,2,0,"_micromarkUtilEncode"],[10,26,2,0],[10,29,2,0,"require"],[10,36,2,0],[10,37,2,0,"_dependencyMap"],[10,51,2,0],[11,2,3,0],[12,0,4,0],[13,0,5,0],[14,0,6,0],[15,0,7,0],[16,0,8,0],[17,0,9,0],[18,0,10,0],[19,0,11,0],[20,0,12,0],[21,0,13,0],[22,0,14,0],[23,0,15,0],[24,0,16,0],[25,0,17,0],[26,0,18,0],[27,0,19,0],[28,0,20,0],[29,0,21,0],[30,0,22,0],[31,0,23,0],[32,0,24,0],[33,2,25,7],[33,11,25,16,"sanitizeUri"],[33,22,25,27,"sanitizeUri"],[33,23,25,28,"url"],[33,26,25,31],[33,28,25,33,"protocol"],[33,36,25,41],[33,38,25,43],[34,4,26,2],[34,10,26,8,"value"],[34,15,26,13],[34,18,26,16],[34,22,26,16,"encode"],[34,42,26,22],[34,43,26,22,"encode"],[34,49,26,22],[34,51,26,23,"normalizeUri"],[34,63,26,35],[34,64,26,36,"url"],[34,67,26,39],[34,71,26,43],[34,73,26,45],[34,74,26,46],[34,75,26,47],[35,4,27,2],[35,8,27,6],[35,9,27,7,"protocol"],[35,17,27,15],[35,19,27,17],[36,6,28,4],[36,13,28,11,"value"],[36,18,28,16],[37,4,29,2],[38,4,30,2],[38,10,30,8,"colon"],[38,15,30,13],[38,18,30,16,"value"],[38,23,30,21],[38,24,30,22,"indexOf"],[38,31,30,29],[38,32,30,30],[38,35,30,33],[38,36,30,34],[39,4,31,2],[39,10,31,8,"questionMark"],[39,22,31,20],[39,25,31,23,"value"],[39,30,31,28],[39,31,31,29,"indexOf"],[39,38,31,36],[39,39,31,37],[39,42,31,40],[39,43,31,41],[40,4,32,2],[40,10,32,8,"numberSign"],[40,20,32,18],[40,23,32,21,"value"],[40,28,32,26],[40,29,32,27,"indexOf"],[40,36,32,34],[40,37,32,35],[40,40,32,38],[40,41,32,39],[41,4,33,2],[41,10,33,8,"slash"],[41,15,33,13],[41,18,33,16,"value"],[41,23,33,21],[41,24,33,22,"indexOf"],[41,31,33,29],[41,32,33,30],[41,35,33,33],[41,36,33,34],[42,4,34,2],[43,4,35,2],[44,4,36,2,"colon"],[44,9,36,7],[44,12,36,10],[44,13,36,11],[45,4,37,2],[46,4,38,2,"slash"],[46,9,38,7],[46,12,38,10],[46,13,38,11],[46,14,38,12],[46,18,38,16,"colon"],[46,23,38,21],[46,26,38,24,"slash"],[46,31,38,29],[46,35,38,33,"questionMark"],[46,47,38,45],[46,50,38,48],[46,51,38,49],[46,52,38,50],[46,56,38,54,"colon"],[46,61,38,59],[46,64,38,62,"questionMark"],[46,76,38,74],[46,80,38,78,"numberSign"],[46,90,38,88],[46,93,38,91],[46,94,38,92],[46,95,38,93],[46,99,38,97,"colon"],[46,104,38,102],[46,107,38,105,"numberSign"],[46,117,38,115],[47,4,39,2],[48,4,40,2,"protocol"],[48,12,40,10],[48,13,40,11,"test"],[48,17,40,15],[48,18,40,16,"value"],[48,23,40,21],[48,24,40,22,"slice"],[48,29,40,27],[48,30,40,28],[48,31,40,29],[48,33,40,31,"colon"],[48,38,40,36],[48,39,40,37],[48,40,40,38],[48,42,40,40],[49,6,41,4],[49,13,41,11,"value"],[49,18,41,16],[50,4,42,2],[51,4,43,2],[51,11,43,9],[51,13,43,11],[52,2,44,0],[54,2,46,0],[55,0,47,0],[56,0,48,0],[57,0,49,0],[58,0,50,0],[59,0,51,0],[60,0,52,0],[61,0,53,0],[62,0,54,0],[63,0,55,0],[64,0,56,0],[65,2,57,7],[65,11,57,16,"normalizeUri"],[65,23,57,28,"normalizeUri"],[65,24,57,29,"value"],[65,29,57,34],[65,31,57,36],[66,4,58,2],[67,4,59,2],[67,10,59,8,"result"],[67,16,59,14],[67,19,59,17],[67,21,59,19],[68,4,60,2],[68,8,60,6,"index"],[68,13,60,11],[68,16,60,14],[68,17,60,15],[68,18,60,16],[69,4,61,2],[69,8,61,6,"start"],[69,13,61,11],[69,16,61,14],[69,17,61,15],[70,4,62,2],[70,8,62,6,"skip"],[70,12,62,10],[70,15,62,13],[70,16,62,14],[71,4,63,2],[71,11,63,9],[71,13,63,11,"index"],[71,18,63,16],[71,21,63,19,"value"],[71,26,63,24],[71,27,63,25,"length"],[71,33,63,31],[71,35,63,33],[72,6,64,4],[72,12,64,10,"code"],[72,16,64,14],[72,19,64,17,"value"],[72,24,64,22],[72,25,64,23,"charCodeAt"],[72,35,64,33],[72,36,64,34,"index"],[72,41,64,39],[72,42,64,40],[73,6,65,4],[74,6,66,4],[74,10,66,8,"replace"],[74,17,66,15],[74,20,66,18],[74,22,66,20],[76,6,68,4],[77,6,69,4],[77,10,69,8,"code"],[77,14,69,12],[77,19,69,17],[77,21,69,19],[77,25,69,23],[77,29,69,23,"asciiAlphanumeric"],[77,52,69,40],[77,53,69,40,"asciiAlphanumeric"],[77,70,69,40],[77,72,69,41,"value"],[77,77,69,46],[77,78,69,47,"charCodeAt"],[77,88,69,57],[77,89,69,58,"index"],[77,94,69,63],[77,97,69,66],[77,98,69,67],[77,99,69,68],[77,100,69,69],[77,104,69,73],[77,108,69,73,"asciiAlphanumeric"],[77,131,69,90],[77,132,69,90,"asciiAlphanumeric"],[77,149,69,90],[77,151,69,91,"value"],[77,156,69,96],[77,157,69,97,"charCodeAt"],[77,167,69,107],[77,168,69,108,"index"],[77,173,69,113],[77,176,69,116],[77,177,69,117],[77,178,69,118],[77,179,69,119],[77,181,69,121],[78,8,70,6,"skip"],[78,12,70,10],[78,15,70,13],[78,16,70,14],[79,6,71,4],[80,6,72,4],[81,6,72,4],[81,11,73,9],[81,15,73,13,"code"],[81,19,73,17],[81,22,73,20],[81,25,73,23],[81,27,73,25],[82,8,74,6],[82,12,74,10],[82,13,74,11],[82,32,74,30],[82,33,74,31,"test"],[82,37,74,35],[82,38,74,36,"String"],[82,44,74,42],[82,45,74,43,"fromCharCode"],[82,57,74,55],[82,58,74,56,"code"],[82,62,74,60],[82,63,74,61],[82,64,74,62],[82,66,74,64],[83,10,75,8,"replace"],[83,17,75,15],[83,20,75,18,"String"],[83,26,75,24],[83,27,75,25,"fromCharCode"],[83,39,75,37],[83,40,75,38,"code"],[83,44,75,42],[83,45,75,43],[84,8,76,6],[85,6,77,4],[86,6,78,4],[87,6,78,4],[87,11,79,9],[87,15,79,13,"code"],[87,19,79,17],[87,22,79,20],[87,28,79,26],[87,32,79,30,"code"],[87,36,79,34],[87,39,79,37],[87,45,79,43],[87,47,79,45],[88,8,80,6],[88,14,80,12,"next"],[88,18,80,16],[88,21,80,19,"value"],[88,26,80,24],[88,27,80,25,"charCodeAt"],[88,37,80,35],[88,38,80,36,"index"],[88,43,80,41],[88,46,80,44],[88,47,80,45],[88,48,80,46],[90,8,82,6],[91,8,83,6],[91,12,83,10,"code"],[91,16,83,14],[91,19,83,17],[91,25,83,23],[91,29,83,27,"next"],[91,33,83,31],[91,36,83,34],[91,42,83,40],[91,46,83,44,"next"],[91,50,83,48],[91,53,83,51],[91,59,83,57],[91,61,83,59],[92,10,84,8,"replace"],[92,17,84,15],[92,20,84,18,"String"],[92,26,84,24],[92,27,84,25,"fromCharCode"],[92,39,84,37],[92,40,84,38,"code"],[92,44,84,42],[92,46,84,44,"next"],[92,50,84,48],[92,51,84,49],[93,10,85,8,"skip"],[93,14,85,12],[93,17,85,15],[93,18,85,16],[94,8,86,6],[95,8,87,6],[96,8,87,6],[96,13,88,11],[97,10,89,8,"replace"],[97,17,89,15],[97,20,89,18],[97,28,89,26],[98,8,90,6],[99,6,91,4],[100,6,92,4],[101,6,92,4],[101,11,93,9],[102,8,94,6,"replace"],[102,15,94,13],[102,18,94,16,"String"],[102,24,94,22],[102,25,94,23,"fromCharCode"],[102,37,94,35],[102,38,94,36,"code"],[102,42,94,40],[102,43,94,41],[103,6,95,4],[104,6,96,4],[104,10,96,8,"replace"],[104,17,96,15],[104,19,96,17],[105,8,97,6,"result"],[105,14,97,12],[105,15,97,13,"push"],[105,19,97,17],[105,20,97,18,"value"],[105,25,97,23],[105,26,97,24,"slice"],[105,31,97,29],[105,32,97,30,"start"],[105,37,97,35],[105,39,97,37,"index"],[105,44,97,42],[105,45,97,43],[105,47,97,45,"encodeURIComponent"],[105,65,97,63],[105,66,97,64,"replace"],[105,73,97,71],[105,74,97,72],[105,75,97,73],[106,8,98,6,"start"],[106,13,98,11],[106,16,98,14,"index"],[106,21,98,19],[106,24,98,22,"skip"],[106,28,98,26],[106,31,98,29],[106,32,98,30],[107,8,99,6,"replace"],[107,15,99,13],[107,18,99,16],[107,20,99,18],[108,6,100,4],[109,6,101,4],[109,10,101,8,"skip"],[109,14,101,12],[109,16,101,14],[110,8,102,6,"index"],[110,13,102,11],[110,17,102,15,"skip"],[110,21,102,19],[111,8,103,6,"skip"],[111,12,103,10],[111,15,103,13],[111,16,103,14],[112,6,104,4],[113,4,105,2],[114,4,106,2],[114,11,106,9,"result"],[114,17,106,15],[114,18,106,16,"join"],[114,22,106,20],[114,23,106,21],[114,25,106,23],[114,26,106,24],[114,29,106,27,"value"],[114,34,106,32],[114,35,106,33,"slice"],[114,40,106,38],[114,41,106,39,"start"],[114,46,106,44],[114,47,106,45],[115,2,107,0],[116,0,107,1],[116,3]],"functionMap":{"names":["<global>","sanitizeUri","normalizeUri"],"mappings":"AAA;OCwB;CDmB;OEa"},"hasCjsExports":false},"type":"js/module"}]}