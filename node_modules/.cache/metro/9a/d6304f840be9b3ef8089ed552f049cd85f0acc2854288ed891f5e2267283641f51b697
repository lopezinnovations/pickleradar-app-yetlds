{"dependencies":[{"name":"../types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":56,"index":56}}],"key":"SiqkZ9nARqNkdXfcIWbBgsKp5Yo=","exportNames":["*"],"imports":1}},{"name":"../parser","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":57},"end":{"line":2,"column":46,"index":103}}],"key":"bd0HLfOaom5yCc+EIC1BeLcA4LA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.finalizeBlock = finalizeBlock;\n  var _types = require(_dependencyMap[0], \"../types\");\n  var _parser = require(_dependencyMap[1], \"../parser\");\n  function finalizeBlock(content, type, counter, startPos) {\n    const meta = extractBlockMeta(content, type);\n    const ast = type === 'component' ? undefined : (0, _parser.parseBlockContent)(content) ?? undefined;\n    return {\n      id: (0, _types.generateBlockId)(type, counter),\n      type,\n      content,\n      contentHash: (0, _types.hashContent)(content),\n      startPos,\n      endPos: startPos + content.length,\n      meta,\n      ast\n    };\n  }\n  function extractBlockMeta(content, type) {\n    switch (type) {\n      case 'heading':\n        {\n          const match = content.match(/^(#{1,6})/);\n          return {\n            type: 'heading',\n            level: match?.[1].length || 1\n          };\n        }\n      case 'codeBlock':\n        {\n          const match = content.match(/^(?:`{3,}|~{3,})(\\w*)/);\n          return {\n            type: 'codeBlock',\n            language: match?.[1] || ''\n          };\n        }\n      case 'list':\n        {\n          const lines = content.split('\\n');\n          const isOrdered = /^\\s*\\d+\\./.test(lines[0]);\n          return {\n            type: 'list',\n            ordered: isOrdered,\n            items: lines.filter(l => l.trim())\n          };\n        }\n      case 'table':\n        {\n          const lines = content.split('\\n').filter(l => l.trim());\n          const headers = lines[0]?.split('|').map(h => h.trim()).filter(Boolean) || [];\n          const rows = lines.slice(2).map(row => row.split('|').map(cell => cell.trim()).filter(Boolean));\n          return {\n            type: 'table',\n            headers,\n            rows\n          };\n        }\n      case 'component':\n        {\n          try {\n            const match = content.match(/\\[\\{c:\\s*\"([^\"]+)\"\\s*,\\s*p:\\s*(\\{[\\s\\S]*\\})\\s*\\}\\]/);\n            if (match) {\n              return {\n                type: 'component',\n                name: match[1],\n                props: JSON.parse(match[2])\n              };\n            }\n          } catch {\n            // ignore parse failures\n          }\n          const nameMatch = content.match(/\\[\\{c:\\s*\"([^\"]+)\"/);\n          return {\n            type: 'component',\n            name: nameMatch?.[1] || '',\n            props: {}\n          };\n        }\n      default:\n        return {\n          type\n        };\n    }\n  }\n});","lineCount":90,"map":[[7,2,3,0,"exports"],[7,9,3,0],[7,10,3,0,"finalizeBlock"],[7,23,3,0],[7,26,3,0,"finalizeBlock"],[7,39,3,0],[8,2,1,0],[8,6,1,0,"_types"],[8,12,1,0],[8,15,1,0,"require"],[8,22,1,0],[8,23,1,0,"_dependencyMap"],[8,37,1,0],[9,2,2,0],[9,6,2,0,"_parser"],[9,13,2,0],[9,16,2,0,"require"],[9,23,2,0],[9,24,2,0,"_dependencyMap"],[9,38,2,0],[10,2,3,7],[10,11,3,16,"finalizeBlock"],[10,24,3,29,"finalizeBlock"],[10,25,3,30,"content"],[10,32,3,37],[10,34,3,39,"type"],[10,38,3,43],[10,40,3,45,"counter"],[10,47,3,52],[10,49,3,54,"startPos"],[10,57,3,62],[10,59,3,64],[11,4,4,4],[11,10,4,10,"meta"],[11,14,4,14],[11,17,4,17,"extractBlockMeta"],[11,33,4,33],[11,34,4,34,"content"],[11,41,4,41],[11,43,4,43,"type"],[11,47,4,47],[11,48,4,48],[12,4,5,4],[12,10,5,10,"ast"],[12,13,5,13],[12,16,5,16,"type"],[12,20,5,20],[12,25,5,25],[12,36,5,36],[12,39,6,10,"undefined"],[12,48,6,19],[12,51,7,11],[12,55,7,11,"parseBlockContent"],[12,62,7,28],[12,63,7,28,"parseBlockContent"],[12,80,7,28],[12,82,7,29,"content"],[12,89,7,36],[12,90,7,37],[12,94,7,41,"undefined"],[12,103,7,51],[13,4,8,4],[13,11,8,11],[14,6,9,8,"id"],[14,8,9,10],[14,10,9,12],[14,14,9,12,"generateBlockId"],[14,20,9,27],[14,21,9,27,"generateBlockId"],[14,36,9,27],[14,38,9,28,"type"],[14,42,9,32],[14,44,9,34,"counter"],[14,51,9,41],[14,52,9,42],[15,6,10,8,"type"],[15,10,10,12],[16,6,11,8,"content"],[16,13,11,15],[17,6,12,8,"contentHash"],[17,17,12,19],[17,19,12,21],[17,23,12,21,"hashContent"],[17,29,12,32],[17,30,12,32,"hashContent"],[17,41,12,32],[17,43,12,33,"content"],[17,50,12,40],[17,51,12,41],[18,6,13,8,"startPos"],[18,14,13,16],[19,6,14,8,"endPos"],[19,12,14,14],[19,14,14,16,"startPos"],[19,22,14,24],[19,25,14,27,"content"],[19,32,14,34],[19,33,14,35,"length"],[19,39,14,41],[20,6,15,8,"meta"],[20,10,15,12],[21,6,16,8,"ast"],[22,4,17,4],[22,5,17,5],[23,2,18,0],[24,2,19,0],[24,11,19,9,"extractBlockMeta"],[24,27,19,25,"extractBlockMeta"],[24,28,19,26,"content"],[24,35,19,33],[24,37,19,35,"type"],[24,41,19,39],[24,43,19,41],[25,4,20,4],[25,12,20,12,"type"],[25,16,20,16],[26,6,21,8],[26,11,21,13],[26,20,21,22],[27,8,21,24],[28,10,22,12],[28,16,22,18,"match"],[28,21,22,23],[28,24,22,26,"content"],[28,31,22,33],[28,32,22,34,"match"],[28,37,22,39],[28,38,22,40],[28,49,22,51],[28,50,22,52],[29,10,23,12],[29,17,23,19],[30,12,24,16,"type"],[30,16,24,20],[30,18,24,22],[30,27,24,31],[31,12,25,16,"level"],[31,17,25,21],[31,19,25,24,"match"],[31,24,25,29],[31,27,25,32],[31,28,25,33],[31,29,25,34],[31,30,25,35,"length"],[31,36,25,41],[31,40,25,45],[32,10,26,12],[32,11,26,13],[33,8,27,8],[34,6,28,8],[34,11,28,13],[34,22,28,24],[35,8,28,26],[36,10,29,12],[36,16,29,18,"match"],[36,21,29,23],[36,24,29,26,"content"],[36,31,29,33],[36,32,29,34,"match"],[36,37,29,39],[36,38,29,40],[36,61,29,63],[36,62,29,64],[37,10,30,12],[37,17,30,19],[38,12,31,16,"type"],[38,16,31,20],[38,18,31,22],[38,29,31,33],[39,12,32,16,"language"],[39,20,32,24],[39,22,32,26,"match"],[39,27,32,31],[39,30,32,34],[39,31,32,35],[39,32,32,36],[39,36,32,40],[40,10,33,12],[40,11,33,13],[41,8,34,8],[42,6,35,8],[42,11,35,13],[42,17,35,19],[43,8,35,21],[44,10,36,12],[44,16,36,18,"lines"],[44,21,36,23],[44,24,36,26,"content"],[44,31,36,33],[44,32,36,34,"split"],[44,37,36,39],[44,38,36,40],[44,42,36,44],[44,43,36,45],[45,10,37,12],[45,16,37,18,"isOrdered"],[45,25,37,27],[45,28,37,30],[45,39,37,41],[45,40,37,42,"test"],[45,44,37,46],[45,45,37,47,"lines"],[45,50,37,52],[45,51,37,53],[45,52,37,54],[45,53,37,55],[45,54,37,56],[46,10,38,12],[46,17,38,19],[47,12,39,16,"type"],[47,16,39,20],[47,18,39,22],[47,24,39,28],[48,12,40,16,"ordered"],[48,19,40,23],[48,21,40,25,"isOrdered"],[48,30,40,34],[49,12,41,16,"items"],[49,17,41,21],[49,19,41,23,"lines"],[49,24,41,28],[49,25,41,29,"filter"],[49,31,41,35],[49,32,41,37,"l"],[49,33,41,38],[49,37,41,43,"l"],[49,38,41,44],[49,39,41,45,"trim"],[49,43,41,49],[49,44,41,50],[49,45,41,51],[50,10,42,12],[50,11,42,13],[51,8,43,8],[52,6,44,8],[52,11,44,13],[52,18,44,20],[53,8,44,22],[54,10,45,12],[54,16,45,18,"lines"],[54,21,45,23],[54,24,45,26,"content"],[54,31,45,33],[54,32,45,34,"split"],[54,37,45,39],[54,38,45,40],[54,42,45,44],[54,43,45,45],[54,44,45,46,"filter"],[54,50,45,52],[54,51,45,54,"l"],[54,52,45,55],[54,56,45,60,"l"],[54,57,45,61],[54,58,45,62,"trim"],[54,62,45,66],[54,63,45,67],[54,64,45,68],[54,65,45,69],[55,10,46,12],[55,16,46,18,"headers"],[55,23,46,25],[55,26,46,28,"lines"],[55,31,46,33],[55,32,46,34],[55,33,46,35],[55,34,46,36],[55,36,46,38,"split"],[55,41,46,43],[55,42,46,44],[55,45,46,47],[55,46,46,48],[55,47,46,49,"map"],[55,50,46,52],[55,51,46,54,"h"],[55,52,46,55],[55,56,46,60,"h"],[55,57,46,61],[55,58,46,62,"trim"],[55,62,46,66],[55,63,46,67],[55,64,46,68],[55,65,46,69],[55,66,46,70,"filter"],[55,72,46,76],[55,73,46,77,"Boolean"],[55,80,46,84],[55,81,46,85],[55,85,46,89],[55,87,46,91],[56,10,47,12],[56,16,47,18,"rows"],[56,20,47,22],[56,23,47,25,"lines"],[56,28,47,30],[56,29,48,17,"slice"],[56,34,48,22],[56,35,48,23],[56,36,48,24],[56,37,48,25],[56,38,49,17,"map"],[56,41,49,20],[56,42,49,22,"row"],[56,45,49,25],[56,49,49,30,"row"],[56,52,49,33],[56,53,49,34,"split"],[56,58,49,39],[56,59,49,40],[56,62,49,43],[56,63,49,44],[56,64,49,45,"map"],[56,67,49,48],[56,68,49,50,"cell"],[56,72,49,54],[56,76,49,59,"cell"],[56,80,49,63],[56,81,49,64,"trim"],[56,85,49,68],[56,86,49,69],[56,87,49,70],[56,88,49,71],[56,89,49,72,"filter"],[56,95,49,78],[56,96,49,79,"Boolean"],[56,103,49,86],[56,104,49,87],[56,105,49,88],[57,10,50,12],[57,17,50,19],[58,12,50,21,"type"],[58,16,50,25],[58,18,50,27],[58,25,50,34],[59,12,50,36,"headers"],[59,19,50,43],[60,12,50,45,"rows"],[61,10,50,50],[61,11,50,51],[62,8,51,8],[63,6,52,8],[63,11,52,13],[63,22,52,24],[64,8,52,26],[65,10,53,12],[65,14,53,16],[66,12,54,16],[66,18,54,22,"match"],[66,23,54,27],[66,26,54,30,"content"],[66,33,54,37],[66,34,54,38,"match"],[66,39,54,43],[66,40,54,44],[66,92,54,96],[66,93,54,97],[67,12,55,16],[67,16,55,20,"match"],[67,21,55,25],[67,23,55,27],[68,14,56,20],[68,21,56,27],[69,16,57,24,"type"],[69,20,57,28],[69,22,57,30],[69,33,57,41],[70,16,58,24,"name"],[70,20,58,28],[70,22,58,30,"match"],[70,27,58,35],[70,28,58,36],[70,29,58,37],[70,30,58,38],[71,16,59,24,"props"],[71,21,59,29],[71,23,59,31,"JSON"],[71,27,59,35],[71,28,59,36,"parse"],[71,33,59,41],[71,34,59,42,"match"],[71,39,59,47],[71,40,59,48],[71,41,59,49],[71,42,59,50],[72,14,60,20],[72,15,60,21],[73,12,61,16],[74,10,62,12],[74,11,62,13],[74,12,63,12],[74,18,63,18],[75,12,64,16],[76,10,64,16],[77,10,66,12],[77,16,66,18,"nameMatch"],[77,25,66,27],[77,28,66,30,"content"],[77,35,66,37],[77,36,66,38,"match"],[77,41,66,43],[77,42,66,44],[77,62,66,64],[77,63,66,65],[78,10,67,12],[78,17,67,19],[79,12,68,16,"type"],[79,16,68,20],[79,18,68,22],[79,29,68,33],[80,12,69,16,"name"],[80,16,69,20],[80,18,69,22,"nameMatch"],[80,27,69,31],[80,30,69,34],[80,31,69,35],[80,32,69,36],[80,36,69,40],[80,38,69,42],[81,12,70,16,"props"],[81,17,70,21],[81,19,70,23],[81,20,70,24],[82,10,71,12],[82,11,71,13],[83,8,72,8],[84,6,73,8],[85,8,74,12],[85,15,74,19],[86,10,74,21,"type"],[87,8,74,26],[87,9,74,27],[88,4,75,4],[89,2,76,0],[90,0,76,1],[90,3]],"functionMap":{"names":["<global>","finalizeBlock","extractBlockMeta","lines.filter$argument_0","content.split.filter$argument_0","lines._.split.map$argument_0","lines.slice.map$argument_0","row.split.map$argument_0"],"mappings":"AAA;OCE;CDe;AEC;oCCsB,eD;qDEI,eF;qDGC,eH;qBIG,4BC,qBD,iBJ;CF2B"},"hasCjsExports":false},"type":"js/module"}]}