{"dependencies":[{"name":"./encode-character-reference.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":120},"end":{"line":6,"column":72,"index":192}}],"key":"sawe/msKMtkGKV7eEH5z/U7vsyE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.containerPhrasing = containerPhrasing;\n  var _encodeCharacterReferenceJs = require(_dependencyMap[0], \"./encode-character-reference.js\");\n  /**\n   * @import {Handle, Info, State} from 'mdast-util-to-markdown'\n   * @import {PhrasingParents} from '../types.js'\n   */\n\n  /**\n   * Serialize the children of a parent that contains phrasing children.\n   *\n   * These children will be joined flush together.\n   *\n   * @param {PhrasingParents} parent\n   *   Parent of flow nodes.\n   * @param {State} state\n   *   Info passed around about the current state.\n   * @param {Info} info\n   *   Info on where we are in the document we are generating.\n   * @returns {string}\n   *   Serialized children, joined together.\n   */\n  function containerPhrasing(parent, state, info) {\n    const indexStack = state.indexStack;\n    const children = parent.children || [];\n    /** @type {Array<string>} */\n    const results = [];\n    let index = -1;\n    let before = info.before;\n    /** @type {string | undefined} */\n    let encodeAfter;\n    indexStack.push(-1);\n    let tracker = state.createTracker(info);\n    while (++index < children.length) {\n      const child = children[index];\n      /** @type {string} */\n      let after;\n      indexStack[indexStack.length - 1] = index;\n      if (index + 1 < children.length) {\n        /** @type {Handle} */\n        // @ts-expect-error: hush, it’s actually a `zwitch`.\n        let handle = state.handle.handlers[children[index + 1].type];\n        /** @type {Handle} */\n        // @ts-expect-error: hush, it’s actually a `zwitch`.\n        if (handle && handle.peek) handle = handle.peek;\n        after = handle ? handle(children[index + 1], parent, state, {\n          before: '',\n          after: '',\n          ...tracker.current()\n        }).charAt(0) : '';\n      } else {\n        after = info.after;\n      }\n\n      // In some cases, html (text) can be found in phrasing right after an eol.\n      // When we’d serialize that, in most cases that would be seen as html\n      // (flow).\n      // As we can’t escape or so to prevent it from happening, we take a somewhat\n      // reasonable approach: replace that eol with a space.\n      // See: <https://github.com/syntax-tree/mdast-util-to-markdown/issues/15>\n      if (results.length > 0 && (before === '\\r' || before === '\\n') && child.type === 'html') {\n        results[results.length - 1] = results[results.length - 1].replace(/(\\r?\\n|\\r)$/, ' ');\n        before = ' ';\n\n        // To do: does this work to reset tracker?\n        tracker = state.createTracker(info);\n        tracker.move(results.join(''));\n      }\n      let value = state.handle(child, parent, state, {\n        ...tracker.current(),\n        after,\n        before\n      });\n\n      // If we had to encode the first character after the previous node and it’s\n      // still the same character,\n      // encode it.\n      if (encodeAfter && encodeAfter === value.slice(0, 1)) {\n        value = (0, _encodeCharacterReferenceJs.encodeCharacterReference)(encodeAfter.charCodeAt(0)) + value.slice(1);\n      }\n      const encodingInfo = state.attentionEncodeSurroundingInfo;\n      state.attentionEncodeSurroundingInfo = undefined;\n      encodeAfter = undefined;\n\n      // If we have to encode the first character before the current node and\n      // it’s still the same character,\n      // encode it.\n      if (encodingInfo) {\n        if (results.length > 0 && encodingInfo.before && before === results[results.length - 1].slice(-1)) {\n          results[results.length - 1] = results[results.length - 1].slice(0, -1) + (0, _encodeCharacterReferenceJs.encodeCharacterReference)(before.charCodeAt(0));\n        }\n        if (encodingInfo.after) encodeAfter = after;\n      }\n      tracker.move(value);\n      results.push(value);\n      before = value.slice(-1);\n    }\n    indexStack.pop();\n    return results.join('');\n  }\n});","lineCount":106,"map":[[7,2,22,0,"exports"],[7,9,22,0],[7,10,22,0,"containerPhrasing"],[7,27,22,0],[7,30,22,0,"containerPhrasing"],[7,47,22,0],[8,2,6,0],[8,6,6,0,"_encodeCharacterReferenceJs"],[8,33,6,0],[8,36,6,0,"require"],[8,43,6,0],[8,44,6,0,"_dependencyMap"],[8,58,6,0],[9,2,1,0],[10,0,2,0],[11,0,3,0],[12,0,4,0],[14,2,8,0],[15,0,9,0],[16,0,10,0],[17,0,11,0],[18,0,12,0],[19,0,13,0],[20,0,14,0],[21,0,15,0],[22,0,16,0],[23,0,17,0],[24,0,18,0],[25,0,19,0],[26,0,20,0],[27,0,21,0],[28,2,22,7],[28,11,22,16,"containerPhrasing"],[28,28,22,33,"containerPhrasing"],[28,29,22,34,"parent"],[28,35,22,40],[28,37,22,42,"state"],[28,42,22,47],[28,44,22,49,"info"],[28,48,22,53],[28,50,22,55],[29,4,23,2],[29,10,23,8,"indexStack"],[29,20,23,18],[29,23,23,21,"state"],[29,28,23,26],[29,29,23,27,"indexStack"],[29,39,23,37],[30,4,24,2],[30,10,24,8,"children"],[30,18,24,16],[30,21,24,19,"parent"],[30,27,24,25],[30,28,24,26,"children"],[30,36,24,34],[30,40,24,38],[30,42,24,40],[31,4,25,2],[32,4,26,2],[32,10,26,8,"results"],[32,17,26,15],[32,20,26,18],[32,22,26,20],[33,4,27,2],[33,8,27,6,"index"],[33,13,27,11],[33,16,27,14],[33,17,27,15],[33,18,27,16],[34,4,28,2],[34,8,28,6,"before"],[34,14,28,12],[34,17,28,15,"info"],[34,21,28,19],[34,22,28,20,"before"],[34,28,28,26],[35,4,29,2],[36,4,30,2],[36,8,30,6,"encodeAfter"],[36,19,30,17],[37,4,32,2,"indexStack"],[37,14,32,12],[37,15,32,13,"push"],[37,19,32,17],[37,20,32,18],[37,21,32,19],[37,22,32,20],[37,23,32,21],[38,4,33,2],[38,8,33,6,"tracker"],[38,15,33,13],[38,18,33,16,"state"],[38,23,33,21],[38,24,33,22,"createTracker"],[38,37,33,35],[38,38,33,36,"info"],[38,42,33,40],[38,43,33,41],[39,4,35,2],[39,11,35,9],[39,13,35,11,"index"],[39,18,35,16],[39,21,35,19,"children"],[39,29,35,27],[39,30,35,28,"length"],[39,36,35,34],[39,38,35,36],[40,6,36,4],[40,12,36,10,"child"],[40,17,36,15],[40,20,36,18,"children"],[40,28,36,26],[40,29,36,27,"index"],[40,34,36,32],[40,35,36,33],[41,6,37,4],[42,6,38,4],[42,10,38,8,"after"],[42,15,38,13],[43,6,40,4,"indexStack"],[43,16,40,14],[43,17,40,15,"indexStack"],[43,27,40,25],[43,28,40,26,"length"],[43,34,40,32],[43,37,40,35],[43,38,40,36],[43,39,40,37],[43,42,40,40,"index"],[43,47,40,45],[44,6,42,4],[44,10,42,8,"index"],[44,15,42,13],[44,18,42,16],[44,19,42,17],[44,22,42,20,"children"],[44,30,42,28],[44,31,42,29,"length"],[44,37,42,35],[44,39,42,37],[45,8,43,6],[46,8,44,6],[47,8,45,6],[47,12,45,10,"handle"],[47,18,45,16],[47,21,45,19,"state"],[47,26,45,24],[47,27,45,25,"handle"],[47,33,45,31],[47,34,45,32,"handlers"],[47,42,45,40],[47,43,45,41,"children"],[47,51,45,49],[47,52,45,50,"index"],[47,57,45,55],[47,60,45,58],[47,61,45,59],[47,62,45,60],[47,63,45,61,"type"],[47,67,45,65],[47,68,45,66],[48,8,46,6],[49,8,47,6],[50,8,48,6],[50,12,48,10,"handle"],[50,18,48,16],[50,22,48,20,"handle"],[50,28,48,26],[50,29,48,27,"peek"],[50,33,48,31],[50,35,48,33,"handle"],[50,41,48,39],[50,44,48,42,"handle"],[50,50,48,48],[50,51,48,49,"peek"],[50,55,48,53],[51,8,49,6,"after"],[51,13,49,11],[51,16,49,14,"handle"],[51,22,49,20],[51,25,50,10,"handle"],[51,31,50,16],[51,32,50,17,"children"],[51,40,50,25],[51,41,50,26,"index"],[51,46,50,31],[51,49,50,34],[51,50,50,35],[51,51,50,36],[51,53,50,38,"parent"],[51,59,50,44],[51,61,50,46,"state"],[51,66,50,51],[51,68,50,53],[52,10,51,12,"before"],[52,16,51,18],[52,18,51,20],[52,20,51,22],[53,10,52,12,"after"],[53,15,52,17],[53,17,52,19],[53,19,52,21],[54,10,53,12],[54,13,53,15,"tracker"],[54,20,53,22],[54,21,53,23,"current"],[54,28,53,30],[54,29,53,31],[55,8,54,10],[55,9,54,11],[55,10,54,12],[55,11,54,13,"charAt"],[55,17,54,19],[55,18,54,20],[55,19,54,21],[55,20,54,22],[55,23,55,10],[55,25,55,12],[56,6,56,4],[56,7,56,5],[56,13,56,11],[57,8,57,6,"after"],[57,13,57,11],[57,16,57,14,"info"],[57,20,57,18],[57,21,57,19,"after"],[57,26,57,24],[58,6,58,4],[60,6,60,4],[61,6,61,4],[62,6,62,4],[63,6,63,4],[64,6,64,4],[65,6,65,4],[66,6,66,4],[66,10,67,6,"results"],[66,17,67,13],[66,18,67,14,"length"],[66,24,67,20],[66,27,67,23],[66,28,67,24],[66,33,68,7,"before"],[66,39,68,13],[66,44,68,18],[66,48,68,22],[66,52,68,26,"before"],[66,58,68,32],[66,63,68,37],[66,67,68,41],[66,68,68,42],[66,72,69,6,"child"],[66,77,69,11],[66,78,69,12,"type"],[66,82,69,16],[66,87,69,21],[66,93,69,27],[66,95,70,6],[67,8,71,6,"results"],[67,15,71,13],[67,16,71,14,"results"],[67,23,71,21],[67,24,71,22,"length"],[67,30,71,28],[67,33,71,31],[67,34,71,32],[67,35,71,33],[67,38,71,36,"results"],[67,45,71,43],[67,46,71,44,"results"],[67,53,71,51],[67,54,71,52,"length"],[67,60,71,58],[67,63,71,61],[67,64,71,62],[67,65,71,63],[67,66,71,64,"replace"],[67,73,71,71],[67,74,72,8],[67,87,72,21],[67,89,73,8],[67,92,74,6],[67,93,74,7],[68,8,75,6,"before"],[68,14,75,12],[68,17,75,15],[68,20,75,18],[70,8,77,6],[71,8,78,6,"tracker"],[71,15,78,13],[71,18,78,16,"state"],[71,23,78,21],[71,24,78,22,"createTracker"],[71,37,78,35],[71,38,78,36,"info"],[71,42,78,40],[71,43,78,41],[72,8,79,6,"tracker"],[72,15,79,13],[72,16,79,14,"move"],[72,20,79,18],[72,21,79,19,"results"],[72,28,79,26],[72,29,79,27,"join"],[72,33,79,31],[72,34,79,32],[72,36,79,34],[72,37,79,35],[72,38,79,36],[73,6,80,4],[74,6,82,4],[74,10,82,8,"value"],[74,15,82,13],[74,18,82,16,"state"],[74,23,82,21],[74,24,82,22,"handle"],[74,30,82,28],[74,31,82,29,"child"],[74,36,82,34],[74,38,82,36,"parent"],[74,44,82,42],[74,46,82,44,"state"],[74,51,82,49],[74,53,82,51],[75,8,83,6],[75,11,83,9,"tracker"],[75,18,83,16],[75,19,83,17,"current"],[75,26,83,24],[75,27,83,25],[75,28,83,26],[76,8,84,6,"after"],[76,13,84,11],[77,8,85,6,"before"],[78,6,86,4],[78,7,86,5],[78,8,86,6],[80,6,88,4],[81,6,89,4],[82,6,90,4],[83,6,91,4],[83,10,91,8,"encodeAfter"],[83,21,91,19],[83,25,91,23,"encodeAfter"],[83,36,91,34],[83,41,91,39,"value"],[83,46,91,44],[83,47,91,45,"slice"],[83,52,91,50],[83,53,91,51],[83,54,91,52],[83,56,91,54],[83,57,91,55],[83,58,91,56],[83,60,91,58],[84,8,92,6,"value"],[84,13,92,11],[84,16,93,8],[84,20,93,8,"encodeCharacterReference"],[84,47,93,32],[84,48,93,32,"encodeCharacterReference"],[84,72,93,32],[84,74,93,33,"encodeAfter"],[84,85,93,44],[84,86,93,45,"charCodeAt"],[84,96,93,55],[84,97,93,56],[84,98,93,57],[84,99,93,58],[84,100,93,59],[84,103,93,62,"value"],[84,108,93,67],[84,109,93,68,"slice"],[84,114,93,73],[84,115,93,74],[84,116,93,75],[84,117,93,76],[85,6,94,4],[86,6,96,4],[86,12,96,10,"encodingInfo"],[86,24,96,22],[86,27,96,25,"state"],[86,32,96,30],[86,33,96,31,"attentionEncodeSurroundingInfo"],[86,63,96,61],[87,6,97,4,"state"],[87,11,97,9],[87,12,97,10,"attentionEncodeSurroundingInfo"],[87,42,97,40],[87,45,97,43,"undefined"],[87,54,97,52],[88,6,98,4,"encodeAfter"],[88,17,98,15],[88,20,98,18,"undefined"],[88,29,98,27],[90,6,100,4],[91,6,101,4],[92,6,102,4],[93,6,103,4],[93,10,103,8,"encodingInfo"],[93,22,103,20],[93,24,103,22],[94,8,104,6],[94,12,105,8,"results"],[94,19,105,15],[94,20,105,16,"length"],[94,26,105,22],[94,29,105,25],[94,30,105,26],[94,34,106,8,"encodingInfo"],[94,46,106,20],[94,47,106,21,"before"],[94,53,106,27],[94,57,107,8,"before"],[94,63,107,14],[94,68,107,19,"results"],[94,75,107,26],[94,76,107,27,"results"],[94,83,107,34],[94,84,107,35,"length"],[94,90,107,41],[94,93,107,44],[94,94,107,45],[94,95,107,46],[94,96,107,47,"slice"],[94,101,107,52],[94,102,107,53],[94,103,107,54],[94,104,107,55],[94,105,107,56],[94,107,108,8],[95,10,109,8,"results"],[95,17,109,15],[95,18,109,16,"results"],[95,25,109,23],[95,26,109,24,"length"],[95,32,109,30],[95,35,109,33],[95,36,109,34],[95,37,109,35],[95,40,110,10,"results"],[95,47,110,17],[95,48,110,18,"results"],[95,55,110,25],[95,56,110,26,"length"],[95,62,110,32],[95,65,110,35],[95,66,110,36],[95,67,110,37],[95,68,110,38,"slice"],[95,73,110,43],[95,74,110,44],[95,75,110,45],[95,77,110,47],[95,78,110,48],[95,79,110,49],[95,80,110,50],[95,83,111,10],[95,87,111,10,"encodeCharacterReference"],[95,114,111,34],[95,115,111,34,"encodeCharacterReference"],[95,139,111,34],[95,141,111,35,"before"],[95,147,111,41],[95,148,111,42,"charCodeAt"],[95,158,111,52],[95,159,111,53],[95,160,111,54],[95,161,111,55],[95,162,111,56],[96,8,112,6],[97,8,114,6],[97,12,114,10,"encodingInfo"],[97,24,114,22],[97,25,114,23,"after"],[97,30,114,28],[97,32,114,30,"encodeAfter"],[97,43,114,41],[97,46,114,44,"after"],[97,51,114,49],[98,6,115,4],[99,6,117,4,"tracker"],[99,13,117,11],[99,14,117,12,"move"],[99,18,117,16],[99,19,117,17,"value"],[99,24,117,22],[99,25,117,23],[100,6,118,4,"results"],[100,13,118,11],[100,14,118,12,"push"],[100,18,118,16],[100,19,118,17,"value"],[100,24,118,22],[100,25,118,23],[101,6,119,4,"before"],[101,12,119,10],[101,15,119,13,"value"],[101,20,119,18],[101,21,119,19,"slice"],[101,26,119,24],[101,27,119,25],[101,28,119,26],[101,29,119,27],[101,30,119,28],[102,4,120,2],[103,4,122,2,"indexStack"],[103,14,122,12],[103,15,122,13,"pop"],[103,18,122,16],[103,19,122,17],[103,20,122,18],[104,4,124,2],[104,11,124,9,"results"],[104,18,124,16],[104,19,124,17,"join"],[104,23,124,21],[104,24,124,22],[104,26,124,24],[104,27,124,25],[105,2,125,0],[106,0,125,1],[106,3]],"functionMap":{"names":["<global>","containerPhrasing"],"mappings":"AAA;OCqB;CDuG"},"hasCjsExports":false},"type":"js/module"}]}