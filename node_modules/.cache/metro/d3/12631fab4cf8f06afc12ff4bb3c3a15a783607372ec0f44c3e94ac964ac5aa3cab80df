{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.preprocess = preprocess;\n  /**\n   * @import {Chunk, Code, Encoding, Value} from 'micromark-util-types'\n   */\n\n  /**\n   * @callback Preprocessor\n   *   Preprocess a value.\n   * @param {Value} value\n   *   Value.\n   * @param {Encoding | null | undefined} [encoding]\n   *   Encoding when `value` is a typed array (optional).\n   * @param {boolean | null | undefined} [end=false]\n   *   Whether this is the last chunk (default: `false`).\n   * @returns {Array<Chunk>}\n   *   Chunks.\n   */\n\n  const search = /[\\0\\t\\n\\r]/g;\n\n  /**\n   * @returns {Preprocessor}\n   *   Preprocess a value.\n   */\n  function preprocess() {\n    let column = 1;\n    let buffer = '';\n    /** @type {boolean | undefined} */\n    let start = true;\n    /** @type {boolean | undefined} */\n    let atCarriageReturn;\n    return preprocessor;\n\n    /** @type {Preprocessor} */\n    // eslint-disable-next-line complexity\n    function preprocessor(value, encoding, end) {\n      /** @type {Array<Chunk>} */\n      const chunks = [];\n      /** @type {RegExpMatchArray | null} */\n      let match;\n      /** @type {number} */\n      let next;\n      /** @type {number} */\n      let startPosition;\n      /** @type {number} */\n      let endPosition;\n      /** @type {Code} */\n      let code;\n      value = buffer + (typeof value === 'string' ? value.toString() : new TextDecoder(encoding || undefined).decode(value));\n      startPosition = 0;\n      buffer = '';\n      if (start) {\n        // To do: `markdown-rs` actually parses BOMs (byte order mark).\n        if (value.charCodeAt(0) === 65279) {\n          startPosition++;\n        }\n        start = undefined;\n      }\n      while (startPosition < value.length) {\n        search.lastIndex = startPosition;\n        match = search.exec(value);\n        endPosition = match && match.index !== undefined ? match.index : value.length;\n        code = value.charCodeAt(endPosition);\n        if (!match) {\n          buffer = value.slice(startPosition);\n          break;\n        }\n        if (code === 10 && startPosition === endPosition && atCarriageReturn) {\n          chunks.push(-3);\n          atCarriageReturn = undefined;\n        } else {\n          if (atCarriageReturn) {\n            chunks.push(-5);\n            atCarriageReturn = undefined;\n          }\n          if (startPosition < endPosition) {\n            chunks.push(value.slice(startPosition, endPosition));\n            column += endPosition - startPosition;\n          }\n          switch (code) {\n            case 0:\n              {\n                chunks.push(65533);\n                column++;\n                break;\n              }\n            case 9:\n              {\n                next = Math.ceil(column / 4) * 4;\n                chunks.push(-2);\n                while (column++ < next) chunks.push(-1);\n                break;\n              }\n            case 10:\n              {\n                chunks.push(-4);\n                column = 1;\n                break;\n              }\n            default:\n              {\n                atCarriageReturn = true;\n                column = 1;\n              }\n          }\n        }\n        startPosition = endPosition + 1;\n      }\n      if (end) {\n        if (atCarriageReturn) chunks.push(-5);\n        if (buffer) chunks.push(buffer);\n        chunks.push(null);\n      }\n      return chunks;\n    }\n  }\n});","lineCount":123,"map":[[7,2,24,0,"exports"],[7,9,24,0],[7,10,24,0,"preprocess"],[7,20,24,0],[7,23,24,0,"preprocess"],[7,33,24,0],[8,2,1,0],[9,0,2,0],[10,0,3,0],[12,2,5,0],[13,0,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,0,13,0],[21,0,14,0],[22,0,15,0],[23,0,16,0],[25,2,18,0],[25,8,18,6,"search"],[25,14,18,12],[25,17,18,15],[25,30,18,28],[27,2,20,0],[28,0,21,0],[29,0,22,0],[30,0,23,0],[31,2,24,7],[31,11,24,16,"preprocess"],[31,21,24,26,"preprocess"],[31,22,24,26],[31,24,24,29],[32,4,25,2],[32,8,25,6,"column"],[32,14,25,12],[32,17,25,15],[32,18,25,16],[33,4,26,2],[33,8,26,6,"buffer"],[33,14,26,12],[33,17,26,15],[33,19,26,17],[34,4,27,2],[35,4,28,2],[35,8,28,6,"start"],[35,13,28,11],[35,16,28,14],[35,20,28,18],[36,4,29,2],[37,4,30,2],[37,8,30,6,"atCarriageReturn"],[37,24,30,22],[38,4,31,2],[38,11,31,9,"preprocessor"],[38,23,31,21],[40,4,33,2],[41,4,34,2],[42,4,35,2],[42,13,35,11,"preprocessor"],[42,25,35,23,"preprocessor"],[42,26,35,24,"value"],[42,31,35,29],[42,33,35,31,"encoding"],[42,41,35,39],[42,43,35,41,"end"],[42,46,35,44],[42,48,35,46],[43,6,36,4],[44,6,37,4],[44,12,37,10,"chunks"],[44,18,37,16],[44,21,37,19],[44,23,37,21],[45,6,38,4],[46,6,39,4],[46,10,39,8,"match"],[46,15,39,13],[47,6,40,4],[48,6,41,4],[48,10,41,8,"next"],[48,14,41,12],[49,6,42,4],[50,6,43,4],[50,10,43,8,"startPosition"],[50,23,43,21],[51,6,44,4],[52,6,45,4],[52,10,45,8,"endPosition"],[52,21,45,19],[53,6,46,4],[54,6,47,4],[54,10,47,8,"code"],[54,14,47,12],[55,6,48,4,"value"],[55,11,48,9],[55,14,48,12,"buffer"],[55,20,48,18],[55,24,48,22],[55,31,48,29,"value"],[55,36,48,34],[55,41,48,39],[55,49,48,47],[55,52,48,50,"value"],[55,57,48,55],[55,58,48,56,"toString"],[55,66,48,64],[55,67,48,65],[55,68,48,66],[55,71,48,69],[55,75,48,73,"TextDecoder"],[55,86,48,84],[55,87,48,85,"encoding"],[55,95,48,93],[55,99,48,97,"undefined"],[55,108,48,106],[55,109,48,107],[55,110,48,108,"decode"],[55,116,48,114],[55,117,48,115,"value"],[55,122,48,120],[55,123,48,121],[55,124,48,122],[56,6,49,4,"startPosition"],[56,19,49,17],[56,22,49,20],[56,23,49,21],[57,6,50,4,"buffer"],[57,12,50,10],[57,15,50,13],[57,17,50,15],[58,6,51,4],[58,10,51,8,"start"],[58,15,51,13],[58,17,51,15],[59,8,52,6],[60,8,53,6],[60,12,53,10,"value"],[60,17,53,15],[60,18,53,16,"charCodeAt"],[60,28,53,26],[60,29,53,27],[60,30,53,28],[60,31,53,29],[60,36,53,34],[60,41,53,39],[60,43,53,41],[61,10,54,8,"startPosition"],[61,23,54,21],[61,25,54,23],[62,8,55,6],[63,8,56,6,"start"],[63,13,56,11],[63,16,56,14,"undefined"],[63,25,56,23],[64,6,57,4],[65,6,58,4],[65,13,58,11,"startPosition"],[65,26,58,24],[65,29,58,27,"value"],[65,34,58,32],[65,35,58,33,"length"],[65,41,58,39],[65,43,58,41],[66,8,59,6,"search"],[66,14,59,12],[66,15,59,13,"lastIndex"],[66,24,59,22],[66,27,59,25,"startPosition"],[66,40,59,38],[67,8,60,6,"match"],[67,13,60,11],[67,16,60,14,"search"],[67,22,60,20],[67,23,60,21,"exec"],[67,27,60,25],[67,28,60,26,"value"],[67,33,60,31],[67,34,60,32],[68,8,61,6,"endPosition"],[68,19,61,17],[68,22,61,20,"match"],[68,27,61,25],[68,31,61,29,"match"],[68,36,61,34],[68,37,61,35,"index"],[68,42,61,40],[68,47,61,45,"undefined"],[68,56,61,54],[68,59,61,57,"match"],[68,64,61,62],[68,65,61,63,"index"],[68,70,61,68],[68,73,61,71,"value"],[68,78,61,76],[68,79,61,77,"length"],[68,85,61,83],[69,8,62,6,"code"],[69,12,62,10],[69,15,62,13,"value"],[69,20,62,18],[69,21,62,19,"charCodeAt"],[69,31,62,29],[69,32,62,30,"endPosition"],[69,43,62,41],[69,44,62,42],[70,8,63,6],[70,12,63,10],[70,13,63,11,"match"],[70,18,63,16],[70,20,63,18],[71,10,64,8,"buffer"],[71,16,64,14],[71,19,64,17,"value"],[71,24,64,22],[71,25,64,23,"slice"],[71,30,64,28],[71,31,64,29,"startPosition"],[71,44,64,42],[71,45,64,43],[72,10,65,8],[73,8,66,6],[74,8,67,6],[74,12,67,10,"code"],[74,16,67,14],[74,21,67,19],[74,23,67,21],[74,27,67,25,"startPosition"],[74,40,67,38],[74,45,67,43,"endPosition"],[74,56,67,54],[74,60,67,58,"atCarriageReturn"],[74,76,67,74],[74,78,67,76],[75,10,68,8,"chunks"],[75,16,68,14],[75,17,68,15,"push"],[75,21,68,19],[75,22,68,20],[75,23,68,21],[75,24,68,22],[75,25,68,23],[76,10,69,8,"atCarriageReturn"],[76,26,69,24],[76,29,69,27,"undefined"],[76,38,69,36],[77,8,70,6],[77,9,70,7],[77,15,70,13],[78,10,71,8],[78,14,71,12,"atCarriageReturn"],[78,30,71,28],[78,32,71,30],[79,12,72,10,"chunks"],[79,18,72,16],[79,19,72,17,"push"],[79,23,72,21],[79,24,72,22],[79,25,72,23],[79,26,72,24],[79,27,72,25],[80,12,73,10,"atCarriageReturn"],[80,28,73,26],[80,31,73,29,"undefined"],[80,40,73,38],[81,10,74,8],[82,10,75,8],[82,14,75,12,"startPosition"],[82,27,75,25],[82,30,75,28,"endPosition"],[82,41,75,39],[82,43,75,41],[83,12,76,10,"chunks"],[83,18,76,16],[83,19,76,17,"push"],[83,23,76,21],[83,24,76,22,"value"],[83,29,76,27],[83,30,76,28,"slice"],[83,35,76,33],[83,36,76,34,"startPosition"],[83,49,76,47],[83,51,76,49,"endPosition"],[83,62,76,60],[83,63,76,61],[83,64,76,62],[84,12,77,10,"column"],[84,18,77,16],[84,22,77,20,"endPosition"],[84,33,77,31],[84,36,77,34,"startPosition"],[84,49,77,47],[85,10,78,8],[86,10,79,8],[86,18,79,16,"code"],[86,22,79,20],[87,12,80,10],[87,17,80,15],[87,18,80,16],[88,14,81,12],[89,16,82,14,"chunks"],[89,22,82,20],[89,23,82,21,"push"],[89,27,82,25],[89,28,82,26],[89,33,82,31],[89,34,82,32],[90,16,83,14,"column"],[90,22,83,20],[90,24,83,22],[91,16,84,14],[92,14,85,12],[93,12,86,10],[93,17,86,15],[93,18,86,16],[94,14,87,12],[95,16,88,14,"next"],[95,20,88,18],[95,23,88,21,"Math"],[95,27,88,25],[95,28,88,26,"ceil"],[95,32,88,30],[95,33,88,31,"column"],[95,39,88,37],[95,42,88,40],[95,43,88,41],[95,44,88,42],[95,47,88,45],[95,48,88,46],[96,16,89,14,"chunks"],[96,22,89,20],[96,23,89,21,"push"],[96,27,89,25],[96,28,89,26],[96,29,89,27],[96,30,89,28],[96,31,89,29],[97,16,90,14],[97,23,90,21,"column"],[97,29,90,27],[97,31,90,29],[97,34,90,32,"next"],[97,38,90,36],[97,40,90,38,"chunks"],[97,46,90,44],[97,47,90,45,"push"],[97,51,90,49],[97,52,90,50],[97,53,90,51],[97,54,90,52],[97,55,90,53],[98,16,91,14],[99,14,92,12],[100,12,93,10],[100,17,93,15],[100,19,93,17],[101,14,94,12],[102,16,95,14,"chunks"],[102,22,95,20],[102,23,95,21,"push"],[102,27,95,25],[102,28,95,26],[102,29,95,27],[102,30,95,28],[102,31,95,29],[103,16,96,14,"column"],[103,22,96,20],[103,25,96,23],[103,26,96,24],[104,16,97,14],[105,14,98,12],[106,12,99,10],[107,14,100,12],[108,16,101,14,"atCarriageReturn"],[108,32,101,30],[108,35,101,33],[108,39,101,37],[109,16,102,14,"column"],[109,22,102,20],[109,25,102,23],[109,26,102,24],[110,14,103,12],[111,10,104,8],[112,8,105,6],[113,8,106,6,"startPosition"],[113,21,106,19],[113,24,106,22,"endPosition"],[113,35,106,33],[113,38,106,36],[113,39,106,37],[114,6,107,4],[115,6,108,4],[115,10,108,8,"end"],[115,13,108,11],[115,15,108,13],[116,8,109,6],[116,12,109,10,"atCarriageReturn"],[116,28,109,26],[116,30,109,28,"chunks"],[116,36,109,34],[116,37,109,35,"push"],[116,41,109,39],[116,42,109,40],[116,43,109,41],[116,44,109,42],[116,45,109,43],[117,8,110,6],[117,12,110,10,"buffer"],[117,18,110,16],[117,20,110,18,"chunks"],[117,26,110,24],[117,27,110,25,"push"],[117,31,110,29],[117,32,110,30,"buffer"],[117,38,110,36],[117,39,110,37],[118,8,111,6,"chunks"],[118,14,111,12],[118,15,111,13,"push"],[118,19,111,17],[118,20,111,18],[118,24,111,22],[118,25,111,23],[119,6,112,4],[120,6,113,4],[120,13,113,11,"chunks"],[120,19,113,17],[121,4,114,2],[122,2,115,0],[123,0,115,1],[123,3]],"functionMap":{"names":["<global>","preprocess","preprocessor"],"mappings":"AAA;OCuB;ECW;GD+E"},"hasCjsExports":false},"type":"js/module"}]}