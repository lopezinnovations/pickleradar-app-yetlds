{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":1},"end":{"line":2,"column":46,"index":47}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"./useAuth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":86},"end":{"line":4,"column":36,"index":122}}],"key":"YodAOaK/lIo8hkNYecbkSd+4iyQ=","exportNames":["*"],"imports":1}},{"name":"../utils/locationUtils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":123},"end":{"line":5,"column":82,"index":205}}],"key":"JDvOrab5tlThoH3k3LzqJMnKrVw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useLocation\", {\n    enumerable: true,\n    get: function () {\n      return useLocation;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[1], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  var _useAuth = require(_dependencyMap[2], \"./useAuth\");\n  var _utilsLocationUtils = require(_dependencyMap[3], \"../utils/locationUtils\");\n  const useLocation = () => {\n    _s();\n    const {\n      user,\n      updateUserProfile\n    } = (0, _useAuth.useAuth)();\n    const [requestingPermission, setRequestingPermission] = (0, _react.useState)(false);\n\n    // FIXED: Only request location when user explicitly taps a button\n    const requestLocation = (0, _react.useCallback)(async () => {\n      console.log('useLocation: User explicitly requested location permission');\n      if (!user) {\n        console.log('useLocation: No user found, cannot request location');\n        Alert.default.alert('Error', 'You must be logged in to enable location services.');\n        return;\n      }\n      setRequestingPermission(true);\n      try {\n        console.log('useLocation: Calling requestLocationPermission');\n        const result = await (0, _utilsLocationUtils.requestLocationPermission)();\n        if (result.granted && result.latitude && result.longitude) {\n          console.log('useLocation: Permission granted, updating user profile with location');\n          await updateUserProfile({\n            latitude: result.latitude,\n            longitude: result.longitude,\n            locationEnabled: true,\n            locationPermissionRequested: true\n          });\n          Alert.default.alert('Success', 'Location saved! You can now see nearby courts.');\n        } else {\n          console.log('useLocation: Permission denied or location unavailable');\n          await updateUserProfile({\n            locationPermissionRequested: true\n          });\n          Alert.default.alert('Location Access Denied', 'You can still use PickleRadar by searching for courts using a ZIP code.');\n        }\n      } catch (error) {\n        console.error('useLocation: Error requesting location:', error);\n        Alert.default.alert('Location Error', 'Unable to access location. You can still search by ZIP code.');\n        try {\n          await updateUserProfile({\n            locationPermissionRequested: true\n          });\n        } catch (updateError) {\n          console.error('useLocation: Error updating permission status:', updateError);\n        }\n      } finally {\n        setRequestingPermission(false);\n      }\n    }, [user, updateUserProfile]);\n    const updateZipCode = async zipCode => {\n      if (!user) return {\n        success: false,\n        error: 'Not logged in'\n      };\n      try {\n        console.log('useLocation: Geocoding ZIP code:', zipCode);\n        const result = await (0, _utilsLocationUtils.geocodeZipCode)(zipCode);\n        if (result.success && result.latitude && result.longitude) {\n          console.log('useLocation: ZIP code geocoded successfully');\n          await updateUserProfile({\n            zipCode,\n            latitude: result.latitude,\n            longitude: result.longitude\n          });\n          return {\n            success: true\n          };\n        } else {\n          console.log('useLocation: ZIP code geocoding failed:', result.error);\n          return {\n            success: false,\n            error: result.error || 'Invalid ZIP code'\n          };\n        }\n      } catch (error) {\n        console.error('useLocation: Error updating ZIP code:', error);\n        return {\n          success: false,\n          error: 'Failed to update ZIP code'\n        };\n      }\n    };\n    return {\n      requestLocation,\n      updateZipCode,\n      requestingPermission,\n      hasLocation: !!(user?.latitude && user?.longitude),\n      userLocation: user?.latitude && user?.longitude ? {\n        latitude: user.latitude,\n        longitude: user.longitude\n      } : null\n    };\n  };\n  _s(useLocation, \"tHyiFw9V6N3ZNRVEyoi45HDvSpQ=\", false, function () {\n    return [_useAuth.useAuth];\n  });\n});","lineCount":121,"map":[[13,2,7,0,"Object"],[13,8,7,0],[13,9,7,0,"defineProperty"],[13,23,7,0],[13,24,7,0,"exports"],[13,31,7,0],[14,4,7,0,"enumerable"],[14,14,7,0],[15,4,7,0,"get"],[15,7,7,0],[15,18,7,0,"get"],[15,19,7,0],[16,6,7,0],[16,13,7,0,"useLocation"],[16,24,7,0],[17,4,7,0],[18,2,7,0],[19,2,2,0],[19,6,2,0,"_react"],[19,12,2,0],[19,15,2,0,"require"],[19,22,2,0],[19,23,2,0,"_dependencyMap"],[19,37,2,0],[20,2,2,46],[20,6,2,46,"_reactNativeWebDistExportsAlert"],[20,37,2,46],[20,40,2,46,"require"],[20,47,2,46],[20,48,2,46,"_dependencyMap"],[20,62,2,46],[21,2,2,46],[21,6,2,46,"Alert"],[21,11,2,46],[21,14,2,46,"_interopDefault"],[21,29,2,46],[21,30,2,46,"_reactNativeWebDistExportsAlert"],[21,61,2,46],[22,2,4,0],[22,6,4,0,"_useAuth"],[22,14,4,0],[22,17,4,0,"require"],[22,24,4,0],[22,25,4,0,"_dependencyMap"],[22,39,4,0],[23,2,5,0],[23,6,5,0,"_utilsLocationUtils"],[23,25,5,0],[23,28,5,0,"require"],[23,35,5,0],[23,36,5,0,"_dependencyMap"],[23,50,5,0],[24,2,7,7],[24,8,7,13,"useLocation"],[24,19,7,24],[24,22,7,27,"useLocation"],[24,23,7,27],[24,28,7,33],[25,4,7,33,"_s"],[25,6,7,33],[26,4,8,2],[26,10,8,8],[27,6,8,10,"user"],[27,10,8,14],[28,6,8,16,"updateUserProfile"],[29,4,8,34],[29,5,8,35],[29,8,8,38],[29,12,8,38,"useAuth"],[29,20,8,45],[29,21,8,45,"useAuth"],[29,28,8,45],[29,30,8,46],[29,31,8,47],[30,4,9,2],[30,10,9,8],[30,11,9,9,"requestingPermission"],[30,31,9,29],[30,33,9,31,"setRequestingPermission"],[30,56,9,54],[30,57,9,55],[30,60,9,58],[30,64,9,58,"useState"],[30,70,9,66],[30,71,9,66,"useState"],[30,79,9,66],[30,81,9,67],[30,86,9,72],[30,87,9,73],[32,4,11,2],[33,4,12,2],[33,10,12,8,"requestLocation"],[33,25,12,23],[33,28,12,26],[33,32,12,26,"useCallback"],[33,38,12,37],[33,39,12,37,"useCallback"],[33,50,12,37],[33,52,12,38],[33,64,12,50],[34,6,13,4,"console"],[34,13,13,11],[34,14,13,12,"log"],[34,17,13,15],[34,18,13,16],[34,78,13,76],[34,79,13,77],[35,6,14,4],[35,10,14,8],[35,11,14,9,"user"],[35,15,14,13],[35,17,14,15],[36,8,15,6,"console"],[36,15,15,13],[36,16,15,14,"log"],[36,19,15,17],[36,20,15,18],[36,73,15,71],[36,74,15,72],[37,8,16,6,"Alert"],[37,13,16,11],[37,14,16,11,"default"],[37,21,16,11],[37,22,16,12,"alert"],[37,27,16,17],[37,28,16,18],[37,35,16,25],[37,37,16,27],[37,89,16,79],[37,90,16,80],[38,8,17,6],[39,6,18,4],[40,6,20,4,"setRequestingPermission"],[40,29,20,27],[40,30,20,28],[40,34,20,32],[40,35,20,33],[41,6,22,4],[41,10,22,8],[42,8,23,6,"console"],[42,15,23,13],[42,16,23,14,"log"],[42,19,23,17],[42,20,23,18],[42,68,23,66],[42,69,23,67],[43,8,24,6],[43,14,24,12,"result"],[43,20,24,18],[43,23,24,21],[43,29,24,27],[43,33,24,27,"requestLocationPermission"],[43,52,24,52],[43,53,24,52,"requestLocationPermission"],[43,78,24,52],[43,80,24,53],[43,81,24,54],[44,8,26,6],[44,12,26,10,"result"],[44,18,26,16],[44,19,26,17,"granted"],[44,26,26,24],[44,30,26,28,"result"],[44,36,26,34],[44,37,26,35,"latitude"],[44,45,26,43],[44,49,26,47,"result"],[44,55,26,53],[44,56,26,54,"longitude"],[44,65,26,63],[44,67,26,65],[45,10,27,8,"console"],[45,17,27,15],[45,18,27,16,"log"],[45,21,27,19],[45,22,27,20],[45,92,27,90],[45,93,27,91],[46,10,28,8],[46,16,28,14,"updateUserProfile"],[46,33,28,31],[46,34,28,32],[47,12,29,10,"latitude"],[47,20,29,18],[47,22,29,20,"result"],[47,28,29,26],[47,29,29,27,"latitude"],[47,37,29,35],[48,12,30,10,"longitude"],[48,21,30,19],[48,23,30,21,"result"],[48,29,30,27],[48,30,30,28,"longitude"],[48,39,30,37],[49,12,31,10,"locationEnabled"],[49,27,31,25],[49,29,31,27],[49,33,31,31],[50,12,32,10,"locationPermissionRequested"],[50,39,32,37],[50,41,32,39],[51,10,33,8],[51,11,33,9],[51,12,33,10],[52,10,34,8,"Alert"],[52,15,34,13],[52,16,34,13,"default"],[52,23,34,13],[52,24,34,14,"alert"],[52,29,34,19],[52,30,34,20],[52,39,34,29],[52,41,34,31],[52,89,34,79],[52,90,34,80],[53,8,35,6],[53,9,35,7],[53,15,35,13],[54,10,36,8,"console"],[54,17,36,15],[54,18,36,16,"log"],[54,21,36,19],[54,22,36,20],[54,78,36,76],[54,79,36,77],[55,10,37,8],[55,16,37,14,"updateUserProfile"],[55,33,37,31],[55,34,37,32],[56,12,37,34,"locationPermissionRequested"],[56,39,37,61],[56,41,37,63],[57,10,37,68],[57,11,37,69],[57,12,37,70],[58,10,38,8,"Alert"],[58,15,38,13],[58,16,38,13,"default"],[58,23,38,13],[58,24,38,14,"alert"],[58,29,38,19],[58,30,39,10],[58,54,39,34],[58,56,40,10],[58,129,41,8],[58,130,41,9],[59,8,42,6],[60,6,43,4],[60,7,43,5],[60,8,43,6],[60,15,43,13,"error"],[60,20,43,18],[60,22,43,20],[61,8,44,6,"console"],[61,15,44,13],[61,16,44,14,"error"],[61,21,44,19],[61,22,44,20],[61,63,44,61],[61,65,44,63,"error"],[61,70,44,68],[61,71,44,69],[62,8,45,6,"Alert"],[62,13,45,11],[62,14,45,11,"default"],[62,21,45,11],[62,22,45,12,"alert"],[62,27,45,17],[62,28,46,8],[62,44,46,24],[62,46,47,8],[62,108,48,6],[62,109,48,7],[63,8,49,6],[63,12,49,10],[64,10,50,8],[64,16,50,14,"updateUserProfile"],[64,33,50,31],[64,34,50,32],[65,12,50,34,"locationPermissionRequested"],[65,39,50,61],[65,41,50,63],[66,10,50,68],[66,11,50,69],[66,12,50,70],[67,8,51,6],[67,9,51,7],[67,10,51,8],[67,17,51,15,"updateError"],[67,28,51,26],[67,30,51,28],[68,10,52,8,"console"],[68,17,52,15],[68,18,52,16,"error"],[68,23,52,21],[68,24,52,22],[68,72,52,70],[68,74,52,72,"updateError"],[68,85,52,83],[68,86,52,84],[69,8,53,6],[70,6,54,4],[70,7,54,5],[70,16,54,14],[71,8,55,6,"setRequestingPermission"],[71,31,55,29],[71,32,55,30],[71,37,55,35],[71,38,55,36],[72,6,56,4],[73,4,57,2],[73,5,57,3],[73,7,57,5],[73,8,57,6,"user"],[73,12,57,10],[73,14,57,12,"updateUserProfile"],[73,31,57,29],[73,32,57,30],[73,33,57,31],[74,4,59,2],[74,10,59,8,"updateZipCode"],[74,23,59,21],[74,26,59,24],[74,32,59,31,"zipCode"],[74,39,59,46],[74,43,59,51],[75,6,60,4],[75,10,60,8],[75,11,60,9,"user"],[75,15,60,13],[75,17,60,15],[75,24,60,22],[76,8,60,24,"success"],[76,15,60,31],[76,17,60,33],[76,22,60,38],[77,8,60,40,"error"],[77,13,60,45],[77,15,60,47],[78,6,60,63],[78,7,60,64],[79,6,62,4],[79,10,62,8],[80,8,63,6,"console"],[80,15,63,13],[80,16,63,14,"log"],[80,19,63,17],[80,20,63,18],[80,54,63,52],[80,56,63,54,"zipCode"],[80,63,63,61],[80,64,63,62],[81,8,64,6],[81,14,64,12,"result"],[81,20,64,18],[81,23,64,21],[81,29,64,27],[81,33,64,27,"geocodeZipCode"],[81,52,64,41],[81,53,64,41,"geocodeZipCode"],[81,67,64,41],[81,69,64,42,"zipCode"],[81,76,64,49],[81,77,64,50],[82,8,66,6],[82,12,66,10,"result"],[82,18,66,16],[82,19,66,17,"success"],[82,26,66,24],[82,30,66,28,"result"],[82,36,66,34],[82,37,66,35,"latitude"],[82,45,66,43],[82,49,66,47,"result"],[82,55,66,53],[82,56,66,54,"longitude"],[82,65,66,63],[82,67,66,65],[83,10,67,8,"console"],[83,17,67,15],[83,18,67,16,"log"],[83,21,67,19],[83,22,67,20],[83,67,67,65],[83,68,67,66],[84,10,68,8],[84,16,68,14,"updateUserProfile"],[84,33,68,31],[84,34,68,32],[85,12,69,10,"zipCode"],[85,19,69,17],[86,12,70,10,"latitude"],[86,20,70,18],[86,22,70,20,"result"],[86,28,70,26],[86,29,70,27,"latitude"],[86,37,70,35],[87,12,71,10,"longitude"],[87,21,71,19],[87,23,71,21,"result"],[87,29,71,27],[87,30,71,28,"longitude"],[88,10,72,8],[88,11,72,9],[88,12,72,10],[89,10,73,8],[89,17,73,15],[90,12,73,17,"success"],[90,19,73,24],[90,21,73,26],[91,10,73,31],[91,11,73,32],[92,8,74,6],[92,9,74,7],[92,15,74,13],[93,10,75,8,"console"],[93,17,75,15],[93,18,75,16,"log"],[93,21,75,19],[93,22,75,20],[93,63,75,61],[93,65,75,63,"result"],[93,71,75,69],[93,72,75,70,"error"],[93,77,75,75],[93,78,75,76],[94,10,76,8],[94,17,76,15],[95,12,76,17,"success"],[95,19,76,24],[95,21,76,26],[95,26,76,31],[96,12,76,33,"error"],[96,17,76,38],[96,19,76,40,"result"],[96,25,76,46],[96,26,76,47,"error"],[96,31,76,52],[96,35,76,56],[97,10,76,75],[97,11,76,76],[98,8,77,6],[99,6,78,4],[99,7,78,5],[99,8,78,6],[99,15,78,13,"error"],[99,20,78,18],[99,22,78,20],[100,8,79,6,"console"],[100,15,79,13],[100,16,79,14,"error"],[100,21,79,19],[100,22,79,20],[100,61,79,59],[100,63,79,61,"error"],[100,68,79,66],[100,69,79,67],[101,8,80,6],[101,15,80,13],[102,10,80,15,"success"],[102,17,80,22],[102,19,80,24],[102,24,80,29],[103,10,80,31,"error"],[103,15,80,36],[103,17,80,38],[104,8,80,66],[104,9,80,67],[105,6,81,4],[106,4,82,2],[106,5,82,3],[107,4,84,2],[107,11,84,9],[108,6,85,4,"requestLocation"],[108,21,85,19],[109,6,86,4,"updateZipCode"],[109,19,86,17],[110,6,87,4,"requestingPermission"],[110,26,87,24],[111,6,88,4,"hasLocation"],[111,17,88,15],[111,19,88,17],[111,20,88,18],[111,22,88,20,"user"],[111,26,88,24],[111,28,88,26,"latitude"],[111,36,88,34],[111,40,88,38,"user"],[111,44,88,42],[111,46,88,44,"longitude"],[111,55,88,53],[111,56,88,54],[112,6,89,4,"userLocation"],[112,18,89,16],[112,20,89,18,"user"],[112,24,89,22],[112,26,89,24,"latitude"],[112,34,89,32],[112,38,89,36,"user"],[112,42,89,40],[112,44,89,42,"longitude"],[112,53,89,51],[112,56,89,54],[113,8,90,6,"latitude"],[113,16,90,14],[113,18,90,16,"user"],[113,22,90,20],[113,23,90,21,"latitude"],[113,31,90,29],[114,8,91,6,"longitude"],[114,17,91,15],[114,19,91,17,"user"],[114,23,91,21],[114,24,91,22,"longitude"],[115,6,92,4],[115,7,92,5],[115,10,92,8],[116,4,93,2],[116,5,93,3],[117,2,94,0],[117,3,94,1],[118,2,94,2,"_s"],[118,4,94,2],[118,5,7,13,"useLocation"],[118,16,7,24],[119,4,7,24],[119,12,8,38,"useAuth"],[119,20,8,45],[119,21,8,45,"useAuth"],[119,28,8,45],[120,2,8,45],[121,0,8,45],[121,3]],"functionMap":{"names":["<global>","useLocation","requestLocation","updateZipCode"],"mappings":"AAA;2BCM;sCCK;GD6C;wBEE;GFuB;CDY"},"hasCjsExports":false},"type":"js/module"}]}