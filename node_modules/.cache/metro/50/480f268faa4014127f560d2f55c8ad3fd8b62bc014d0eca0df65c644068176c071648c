{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.imageReference = imageReference;\n  /**\n   * @import {Info, State} from 'mdast-util-to-markdown'\n   * @import {ImageReference, Parents} from 'mdast'\n   */\n\n  imageReference.peek = imageReferencePeek;\n\n  /**\n   * @param {ImageReference} node\n   * @param {Parents | undefined} _\n   * @param {State} state\n   * @param {Info} info\n   * @returns {string}\n   */\n  function imageReference(node, _, state, info) {\n    const type = node.referenceType;\n    const exit = state.enter('imageReference');\n    let subexit = state.enter('label');\n    const tracker = state.createTracker(info);\n    let value = tracker.move('![');\n    const alt = state.safe(node.alt, {\n      before: value,\n      after: ']',\n      ...tracker.current()\n    });\n    value += tracker.move(alt + '][');\n    subexit();\n    // Hide the fact that we’re in phrasing, because escapes don’t work.\n    const stack = state.stack;\n    state.stack = [];\n    subexit = state.enter('reference');\n    // Note: for proper tracking, we should reset the output positions when we end\n    // up making a `shortcut` reference, because then there is no brace output.\n    // Practically, in that case, there is no content, so it doesn’t matter that\n    // we’ve tracked one too many characters.\n    const reference = state.safe(state.associationId(node), {\n      before: value,\n      after: ']',\n      ...tracker.current()\n    });\n    subexit();\n    state.stack = stack;\n    exit();\n    if (type === 'full' || !alt || alt !== reference) {\n      value += tracker.move(reference + ']');\n    } else if (type === 'shortcut') {\n      // Remove the unwanted `[`.\n      value = value.slice(0, -1);\n    } else {\n      value += tracker.move(']');\n    }\n    return value;\n  }\n\n  /**\n   * @returns {string}\n   */\n  function imageReferencePeek() {\n    return '!';\n  }\n});","lineCount":68,"map":[[7,2,15,0,"exports"],[7,9,15,0],[7,10,15,0,"imageReference"],[7,24,15,0],[7,27,15,0,"imageReference"],[7,41,15,0],[8,2,1,0],[9,0,2,0],[10,0,3,0],[11,0,4,0],[13,2,6,0,"imageReference"],[13,16,6,14],[13,17,6,15,"peek"],[13,21,6,19],[13,24,6,22,"imageReferencePeek"],[13,42,6,40],[15,2,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,0,13,0],[21,0,14,0],[22,2,15,7],[22,11,15,16,"imageReference"],[22,25,15,30,"imageReference"],[22,26,15,31,"node"],[22,30,15,35],[22,32,15,37,"_"],[22,33,15,38],[22,35,15,40,"state"],[22,40,15,45],[22,42,15,47,"info"],[22,46,15,51],[22,48,15,53],[23,4,16,2],[23,10,16,8,"type"],[23,14,16,12],[23,17,16,15,"node"],[23,21,16,19],[23,22,16,20,"referenceType"],[23,35,16,33],[24,4,17,2],[24,10,17,8,"exit"],[24,14,17,12],[24,17,17,15,"state"],[24,22,17,20],[24,23,17,21,"enter"],[24,28,17,26],[24,29,17,27],[24,45,17,43],[24,46,17,44],[25,4,18,2],[25,8,18,6,"subexit"],[25,15,18,13],[25,18,18,16,"state"],[25,23,18,21],[25,24,18,22,"enter"],[25,29,18,27],[25,30,18,28],[25,37,18,35],[25,38,18,36],[26,4,19,2],[26,10,19,8,"tracker"],[26,17,19,15],[26,20,19,18,"state"],[26,25,19,23],[26,26,19,24,"createTracker"],[26,39,19,37],[26,40,19,38,"info"],[26,44,19,42],[26,45,19,43],[27,4,20,2],[27,8,20,6,"value"],[27,13,20,11],[27,16,20,14,"tracker"],[27,23,20,21],[27,24,20,22,"move"],[27,28,20,26],[27,29,20,27],[27,33,20,31],[27,34,20,32],[28,4,21,2],[28,10,21,8,"alt"],[28,13,21,11],[28,16,21,14,"state"],[28,21,21,19],[28,22,21,20,"safe"],[28,26,21,24],[28,27,21,25,"node"],[28,31,21,29],[28,32,21,30,"alt"],[28,35,21,33],[28,37,21,35],[29,6,22,4,"before"],[29,12,22,10],[29,14,22,12,"value"],[29,19,22,17],[30,6,23,4,"after"],[30,11,23,9],[30,13,23,11],[30,16,23,14],[31,6,24,4],[31,9,24,7,"tracker"],[31,16,24,14],[31,17,24,15,"current"],[31,24,24,22],[31,25,24,23],[32,4,25,2],[32,5,25,3],[32,6,25,4],[33,4,26,2,"value"],[33,9,26,7],[33,13,26,11,"tracker"],[33,20,26,18],[33,21,26,19,"move"],[33,25,26,23],[33,26,26,24,"alt"],[33,29,26,27],[33,32,26,30],[33,36,26,34],[33,37,26,35],[34,4,28,2,"subexit"],[34,11,28,9],[34,12,28,10],[34,13,28,11],[35,4,29,2],[36,4,30,2],[36,10,30,8,"stack"],[36,15,30,13],[36,18,30,16,"state"],[36,23,30,21],[36,24,30,22,"stack"],[36,29,30,27],[37,4,31,2,"state"],[37,9,31,7],[37,10,31,8,"stack"],[37,15,31,13],[37,18,31,16],[37,20,31,18],[38,4,32,2,"subexit"],[38,11,32,9],[38,14,32,12,"state"],[38,19,32,17],[38,20,32,18,"enter"],[38,25,32,23],[38,26,32,24],[38,37,32,35],[38,38,32,36],[39,4,33,2],[40,4,34,2],[41,4,35,2],[42,4,36,2],[43,4,37,2],[43,10,37,8,"reference"],[43,19,37,17],[43,22,37,20,"state"],[43,27,37,25],[43,28,37,26,"safe"],[43,32,37,30],[43,33,37,31,"state"],[43,38,37,36],[43,39,37,37,"associationId"],[43,52,37,50],[43,53,37,51,"node"],[43,57,37,55],[43,58,37,56],[43,60,37,58],[44,6,38,4,"before"],[44,12,38,10],[44,14,38,12,"value"],[44,19,38,17],[45,6,39,4,"after"],[45,11,39,9],[45,13,39,11],[45,16,39,14],[46,6,40,4],[46,9,40,7,"tracker"],[46,16,40,14],[46,17,40,15,"current"],[46,24,40,22],[46,25,40,23],[47,4,41,2],[47,5,41,3],[47,6,41,4],[48,4,42,2,"subexit"],[48,11,42,9],[48,12,42,10],[48,13,42,11],[49,4,43,2,"state"],[49,9,43,7],[49,10,43,8,"stack"],[49,15,43,13],[49,18,43,16,"stack"],[49,23,43,21],[50,4,44,2,"exit"],[50,8,44,6],[50,9,44,7],[50,10,44,8],[51,4,46,2],[51,8,46,6,"type"],[51,12,46,10],[51,17,46,15],[51,23,46,21],[51,27,46,25],[51,28,46,26,"alt"],[51,31,46,29],[51,35,46,33,"alt"],[51,38,46,36],[51,43,46,41,"reference"],[51,52,46,50],[51,54,46,52],[52,6,47,4,"value"],[52,11,47,9],[52,15,47,13,"tracker"],[52,22,47,20],[52,23,47,21,"move"],[52,27,47,25],[52,28,47,26,"reference"],[52,37,47,35],[52,40,47,38],[52,43,47,41],[52,44,47,42],[53,4,48,2],[53,5,48,3],[53,11,48,9],[53,15,48,13,"type"],[53,19,48,17],[53,24,48,22],[53,34,48,32],[53,36,48,34],[54,6,49,4],[55,6,50,4,"value"],[55,11,50,9],[55,14,50,12,"value"],[55,19,50,17],[55,20,50,18,"slice"],[55,25,50,23],[55,26,50,24],[55,27,50,25],[55,29,50,27],[55,30,50,28],[55,31,50,29],[55,32,50,30],[56,4,51,2],[56,5,51,3],[56,11,51,9],[57,6,52,4,"value"],[57,11,52,9],[57,15,52,13,"tracker"],[57,22,52,20],[57,23,52,21,"move"],[57,27,52,25],[57,28,52,26],[57,31,52,29],[57,32,52,30],[58,4,53,2],[59,4,55,2],[59,11,55,9,"value"],[59,16,55,14],[60,2,56,0],[62,2,58,0],[63,0,59,0],[64,0,60,0],[65,2,61,0],[65,11,61,9,"imageReferencePeek"],[65,29,61,27,"imageReferencePeek"],[65,30,61,27],[65,32,61,30],[66,4,62,2],[66,11,62,9],[66,14,62,12],[67,2,63,0],[68,0,63,1],[68,3]],"functionMap":{"names":["<global>","imageReference","imageReferencePeek"],"mappings":"AAA;OCc;CDyC;AEK;CFE"},"hasCjsExports":false},"type":"js/module"}]}