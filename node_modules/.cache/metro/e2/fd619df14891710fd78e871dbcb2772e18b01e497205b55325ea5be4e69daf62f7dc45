{"dependencies":[{"name":"remark","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":291},"end":{"line":10,"column":32,"index":323}}],"key":"CmgWx6p9IZVDWsWU65lIvemh0Hw=","exportNames":["*"],"imports":1}},{"name":"remark-gfm","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":324},"end":{"line":11,"column":35,"index":359}}],"key":"LU3KEeDNPD9fGgl9fS8RulTvYnI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.escapeSetextUnderlines = escapeSetextUnderlines;\n  exports.parseMarkdown = parseMarkdown;\n  exports.parseBlockContent = parseBlockContent;\n  exports.parseBlocks = parseBlocks;\n  exports.isValidMarkdown = isValidMarkdown;\n  var _remark = require(_dependencyMap[0], \"remark\");\n  var _remarkGfm = require(_dependencyMap[1], \"remark-gfm\");\n  var remarkGfm = _interopDefault(_remarkGfm);\n  /**\n   * Markdown Parser\n   *\n   * Wrapper around remark + remark-gfm for robust markdown parsing.\n   * Caches the processor instance for performance.\n   *\n   * NOTE: We disable setext-style headings (Text\\n---) and only support\n   * ATX-style headings (# Heading) for predictable streaming behavior.\n   */\n\n  // ============================================================================\n  // Cached Processor\n  // ============================================================================\n  /**\n   * Remark processor instance (created once, reused)\n   * Includes GitHub Flavored Markdown support\n   */\n  const processor = (0, _remark.remark)().use(remarkGfm.default);\n  // ============================================================================\n  // Pre-processing: Disable Setext Headings\n  // ============================================================================\n  /** Valid list marker characters */\n  const LIST_MARKERS = new Set(['-', '*', '+']);\n  /** Pattern to match potential setext underlines (lines of only -/= with optional whitespace) */\n  const SETEXT_PATTERN = /^([ \\t]*)([-=]+)([ \\t]*)$/;\n  /**\n   * Check if a line is a valid UNINDENTED list marker (single -, *, or + at start of line)\n   * Indented single dashes could be setext underlines, so we only preserve unindented ones.\n   */\n  function isUnindentedListMarker(indent, chars) {\n    return !indent && chars.length === 1 && LIST_MARKERS.has(chars);\n  }\n  /**\n   * Check if a line is a horizontal rule (3+ unindented dashes after blank line)\n   */\n  function isHorizontalRule(indent, chars, prevLine) {\n    const isUnindented = !indent;\n    const isThreePlusDashes = chars.length >= 3 && chars[0] === '-';\n    const prevLineIsBlank = !prevLine.trim();\n    return isUnindented && isThreePlusDashes && prevLineIsBlank;\n  }\n  /**\n   * Escape potential setext underlines before parsing.\n   *\n   * Setext headings use underlines (--- or ===) on the line after text:\n   *   Heading\n   *   -------\n   *\n   * We only support ATX-style headings (# Heading) because:\n   * 1. They're unambiguous during streaming\n   * 2. They don't conflict with list markers or horizontal rules\n   *\n   * This function adds a zero-width space to break the setext pattern.\n   * The zero-width space is invisible in rendered output.\n   *\n   * Preserves:\n   * - Unindented single list markers (-, *, +) â€” these start new list items\n   * - Horizontal rules (--- after blank line)\n   *\n   * Escapes:\n   * - Indented dashes/equals (could be setext underlines)\n   * - Multiple dashes/equals (could be setext underlines)\n   *\n   * @param markdown - Raw markdown string\n   * @returns Markdown with setext underlines escaped\n   */\n  function escapeSetextUnderlines(markdown) {\n    const lines = markdown.split('\\n');\n    return lines.map((line, index) => {\n      const match = line.match(SETEXT_PATTERN);\n      if (!match) return line;\n      const [, indent, chars, trailing] = match;\n      const prevLine = index > 0 ? lines[index - 1] : '';\n      // Preserve unindented single list markers (-, *, +)\n      if (isUnindentedListMarker(indent, chars)) return line;\n      // Preserve horizontal rules (3+ unindented dashes after blank line)\n      if (isHorizontalRule(indent, chars, prevLine)) return line;\n      // Escape everything else by inserting zero-width space after indent\n      return `${indent}\\u200B${chars}${trailing}`;\n    }).join('\\n');\n  }\n  // ============================================================================\n  // Parsing Functions\n  // ============================================================================\n  /**\n   * Parse complete markdown document into MDAST Root\n   *\n   * @param markdown - Markdown content to parse\n   * @returns MDAST root node\n   */\n  function parseMarkdown(markdown) {\n    try {\n      const escaped = escapeSetextUnderlines(markdown);\n      return processor.parse(escaped);\n    } catch (error) {\n      console.warn('Remark parse error:', error);\n      return {\n        type: 'root',\n        children: []\n      };\n    }\n  }\n  /**\n   * Parse a single block of markdown and return the first block-level node.\n   * Useful for parsing individual blocks in isolation.\n   *\n   * @param content - Block content to parse\n   * @returns First MDAST block node, or null if empty/invalid\n   */\n  function parseBlockContent(content) {\n    if (!content || content.trim().length === 0) {\n      return null;\n    }\n    try {\n      const escaped = escapeSetextUnderlines(content);\n      const ast = processor.parse(escaped);\n      return ast.children[0] ?? null;\n    } catch (error) {\n      console.warn('Block parse error:', error);\n      return {\n        type: 'paragraph',\n        children: [{\n          type: 'text',\n          value: content\n        }]\n      };\n    }\n  }\n  /**\n   * Parse markdown and return all block nodes (excluding root)\n   *\n   * @param markdown - Markdown content to parse\n   * @returns Array of MDAST block nodes\n   */\n  function parseBlocks(markdown) {\n    const ast = parseMarkdown(markdown);\n    return ast.children;\n  }\n  /**\n   * Check if remark would parse this as valid formatting\n   * Useful for testing/validation\n   *\n   * @param markdown - Markdown to validate\n   * @returns True if parses without errors\n   */\n  function isValidMarkdown(markdown) {\n    try {\n      processor.parse(markdown);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n});","lineCount":173,"map":[[12,2,68,0,"exports"],[12,9,68,0],[12,10,68,0,"escapeSetextUnderlines"],[12,32,68,0],[12,35,68,0,"escapeSetextUnderlines"],[12,57,68,0],[13,2,95,0,"exports"],[13,9,95,0],[13,10,95,0,"parseMarkdown"],[13,23,95,0],[13,26,95,0,"parseMarkdown"],[13,39,95,0],[14,2,112,0,"exports"],[14,9,112,0],[14,10,112,0,"parseBlockContent"],[14,27,112,0],[14,30,112,0,"parseBlockContent"],[14,47,112,0],[15,2,135,0,"exports"],[15,9,135,0],[15,10,135,0,"parseBlocks"],[15,21,135,0],[15,24,135,0,"parseBlocks"],[15,35,135,0],[16,2,146,0,"exports"],[16,9,146,0],[16,10,146,0,"isValidMarkdown"],[16,25,146,0],[16,28,146,0,"isValidMarkdown"],[16,43,146,0],[17,2,10,0],[17,6,10,0,"_remark"],[17,13,10,0],[17,16,10,0,"require"],[17,23,10,0],[17,24,10,0,"_dependencyMap"],[17,38,10,0],[18,2,11,0],[18,6,11,0,"_remarkGfm"],[18,16,11,0],[18,19,11,0,"require"],[18,26,11,0],[18,27,11,0,"_dependencyMap"],[18,41,11,0],[19,2,11,0],[19,6,11,0,"remarkGfm"],[19,15,11,0],[19,18,11,0,"_interopDefault"],[19,33,11,0],[19,34,11,0,"_remarkGfm"],[19,44,11,0],[20,2,1,0],[21,0,2,0],[22,0,3,0],[23,0,4,0],[24,0,5,0],[25,0,6,0],[26,0,7,0],[27,0,8,0],[28,0,9,0],[30,2,12,0],[31,2,13,0],[32,2,14,0],[33,2,15,0],[34,0,16,0],[35,0,17,0],[36,0,18,0],[37,2,19,0],[37,8,19,6,"processor"],[37,17,19,15],[37,20,19,18],[37,24,19,18,"remark"],[37,31,19,24],[37,32,19,24,"remark"],[37,38,19,24],[37,40,19,25],[37,41,19,26],[37,42,19,27,"use"],[37,45,19,30],[37,46,19,31,"remarkGfm"],[37,55,19,40],[37,56,19,40,"default"],[37,63,19,40],[37,64,19,41],[38,2,20,0],[39,2,21,0],[40,2,22,0],[41,2,23,0],[42,2,24,0],[42,8,24,6,"LIST_MARKERS"],[42,20,24,18],[42,23,24,21],[42,27,24,25,"Set"],[42,30,24,28],[42,31,24,29],[42,32,24,30],[42,35,24,33],[42,37,24,35],[42,40,24,38],[42,42,24,40],[42,45,24,43],[42,46,24,44],[42,47,24,45],[43,2,25,0],[44,2,26,0],[44,8,26,6,"SETEXT_PATTERN"],[44,22,26,20],[44,25,26,23],[44,52,26,50],[45,2,27,0],[46,0,28,0],[47,0,29,0],[48,0,30,0],[49,2,31,0],[49,11,31,9,"isUnindentedListMarker"],[49,33,31,31,"isUnindentedListMarker"],[49,34,31,32,"indent"],[49,40,31,38],[49,42,31,40,"chars"],[49,47,31,45],[49,49,31,47],[50,4,32,4],[50,11,32,11],[50,12,32,12,"indent"],[50,18,32,18],[50,22,32,22,"chars"],[50,27,32,27],[50,28,32,28,"length"],[50,34,32,34],[50,39,32,39],[50,40,32,40],[50,44,32,44,"LIST_MARKERS"],[50,56,32,56],[50,57,32,57,"has"],[50,60,32,60],[50,61,32,61,"chars"],[50,66,32,66],[50,67,32,67],[51,2,33,0],[52,2,34,0],[53,0,35,0],[54,0,36,0],[55,2,37,0],[55,11,37,9,"isHorizontalRule"],[55,27,37,25,"isHorizontalRule"],[55,28,37,26,"indent"],[55,34,37,32],[55,36,37,34,"chars"],[55,41,37,39],[55,43,37,41,"prevLine"],[55,51,37,49],[55,53,37,51],[56,4,38,4],[56,10,38,10,"isUnindented"],[56,22,38,22],[56,25,38,25],[56,26,38,26,"indent"],[56,32,38,32],[57,4,39,4],[57,10,39,10,"isThreePlusDashes"],[57,27,39,27],[57,30,39,30,"chars"],[57,35,39,35],[57,36,39,36,"length"],[57,42,39,42],[57,46,39,46],[57,47,39,47],[57,51,39,51,"chars"],[57,56,39,56],[57,57,39,57],[57,58,39,58],[57,59,39,59],[57,64,39,64],[57,67,39,67],[58,4,40,4],[58,10,40,10,"prevLineIsBlank"],[58,25,40,25],[58,28,40,28],[58,29,40,29,"prevLine"],[58,37,40,37],[58,38,40,38,"trim"],[58,42,40,42],[58,43,40,43],[58,44,40,44],[59,4,41,4],[59,11,41,11,"isUnindented"],[59,23,41,23],[59,27,41,27,"isThreePlusDashes"],[59,44,41,44],[59,48,41,48,"prevLineIsBlank"],[59,63,41,63],[60,2,42,0],[61,2,43,0],[62,0,44,0],[63,0,45,0],[64,0,46,0],[65,0,47,0],[66,0,48,0],[67,0,49,0],[68,0,50,0],[69,0,51,0],[70,0,52,0],[71,0,53,0],[72,0,54,0],[73,0,55,0],[74,0,56,0],[75,0,57,0],[76,0,58,0],[77,0,59,0],[78,0,60,0],[79,0,61,0],[80,0,62,0],[81,0,63,0],[82,0,64,0],[83,0,65,0],[84,0,66,0],[85,0,67,0],[86,2,68,7],[86,11,68,16,"escapeSetextUnderlines"],[86,33,68,38,"escapeSetextUnderlines"],[86,34,68,39,"markdown"],[86,42,68,47],[86,44,68,49],[87,4,69,4],[87,10,69,10,"lines"],[87,15,69,15],[87,18,69,18,"markdown"],[87,26,69,26],[87,27,69,27,"split"],[87,32,69,32],[87,33,69,33],[87,37,69,37],[87,38,69,38],[88,4,70,4],[88,11,70,11,"lines"],[88,16,70,16],[88,17,70,17,"map"],[88,20,70,20],[88,21,70,21],[88,22,70,22,"line"],[88,26,70,26],[88,28,70,28,"index"],[88,33,70,33],[88,38,70,38],[89,6,71,8],[89,12,71,14,"match"],[89,17,71,19],[89,20,71,22,"line"],[89,24,71,26],[89,25,71,27,"match"],[89,30,71,32],[89,31,71,33,"SETEXT_PATTERN"],[89,45,71,47],[89,46,71,48],[90,6,72,8],[90,10,72,12],[90,11,72,13,"match"],[90,16,72,18],[90,18,73,12],[90,25,73,19,"line"],[90,29,73,23],[91,6,74,8],[91,12,74,14],[91,15,74,17,"indent"],[91,21,74,23],[91,23,74,25,"chars"],[91,28,74,30],[91,30,74,32,"trailing"],[91,38,74,40],[91,39,74,41],[91,42,74,44,"match"],[91,47,74,49],[92,6,75,8],[92,12,75,14,"prevLine"],[92,20,75,22],[92,23,75,25,"index"],[92,28,75,30],[92,31,75,33],[92,32,75,34],[92,35,75,37,"lines"],[92,40,75,42],[92,41,75,43,"index"],[92,46,75,48],[92,49,75,51],[92,50,75,52],[92,51,75,53],[92,54,75,56],[92,56,75,58],[93,6,76,8],[94,6,77,8],[94,10,77,12,"isUnindentedListMarker"],[94,32,77,34],[94,33,77,35,"indent"],[94,39,77,41],[94,41,77,43,"chars"],[94,46,77,48],[94,47,77,49],[94,49,78,12],[94,56,78,19,"line"],[94,60,78,23],[95,6,79,8],[96,6,80,8],[96,10,80,12,"isHorizontalRule"],[96,26,80,28],[96,27,80,29,"indent"],[96,33,80,35],[96,35,80,37,"chars"],[96,40,80,42],[96,42,80,44,"prevLine"],[96,50,80,52],[96,51,80,53],[96,53,81,12],[96,60,81,19,"line"],[96,64,81,23],[97,6,82,8],[98,6,83,8],[98,13,83,15],[98,16,83,18,"indent"],[98,22,83,24],[98,31,83,33,"chars"],[98,36,83,38],[98,39,83,41,"trailing"],[98,47,83,49],[98,49,83,51],[99,4,84,4],[99,5,84,5],[99,6,84,6],[99,7,84,7,"join"],[99,11,84,11],[99,12,84,12],[99,16,84,16],[99,17,84,17],[100,2,85,0],[101,2,86,0],[102,2,87,0],[103,2,88,0],[104,2,89,0],[105,0,90,0],[106,0,91,0],[107,0,92,0],[108,0,93,0],[109,0,94,0],[110,2,95,7],[110,11,95,16,"parseMarkdown"],[110,24,95,29,"parseMarkdown"],[110,25,95,30,"markdown"],[110,33,95,38],[110,35,95,40],[111,4,96,4],[111,8,96,8],[112,6,97,8],[112,12,97,14,"escaped"],[112,19,97,21],[112,22,97,24,"escapeSetextUnderlines"],[112,44,97,46],[112,45,97,47,"markdown"],[112,53,97,55],[112,54,97,56],[113,6,98,8],[113,13,98,15,"processor"],[113,22,98,24],[113,23,98,25,"parse"],[113,28,98,30],[113,29,98,31,"escaped"],[113,36,98,38],[113,37,98,39],[114,4,99,4],[114,5,99,5],[114,6,100,4],[114,13,100,11,"error"],[114,18,100,16],[114,20,100,18],[115,6,101,8,"console"],[115,13,101,15],[115,14,101,16,"warn"],[115,18,101,20],[115,19,101,21],[115,40,101,42],[115,42,101,44,"error"],[115,47,101,49],[115,48,101,50],[116,6,102,8],[116,13,102,15],[117,8,102,17,"type"],[117,12,102,21],[117,14,102,23],[117,20,102,29],[118,8,102,31,"children"],[118,16,102,39],[118,18,102,41],[119,6,102,44],[119,7,102,45],[120,4,103,4],[121,2,104,0],[122,2,105,0],[123,0,106,0],[124,0,107,0],[125,0,108,0],[126,0,109,0],[127,0,110,0],[128,0,111,0],[129,2,112,7],[129,11,112,16,"parseBlockContent"],[129,28,112,33,"parseBlockContent"],[129,29,112,34,"content"],[129,36,112,41],[129,38,112,43],[130,4,113,4],[130,8,113,8],[130,9,113,9,"content"],[130,16,113,16],[130,20,113,20,"content"],[130,27,113,27],[130,28,113,28,"trim"],[130,32,113,32],[130,33,113,33],[130,34,113,34],[130,35,113,35,"length"],[130,41,113,41],[130,46,113,46],[130,47,113,47],[130,49,113,49],[131,6,114,8],[131,13,114,15],[131,17,114,19],[132,4,115,4],[133,4,116,4],[133,8,116,8],[134,6,117,8],[134,12,117,14,"escaped"],[134,19,117,21],[134,22,117,24,"escapeSetextUnderlines"],[134,44,117,46],[134,45,117,47,"content"],[134,52,117,54],[134,53,117,55],[135,6,118,8],[135,12,118,14,"ast"],[135,15,118,17],[135,18,118,20,"processor"],[135,27,118,29],[135,28,118,30,"parse"],[135,33,118,35],[135,34,118,36,"escaped"],[135,41,118,43],[135,42,118,44],[136,6,119,8],[136,13,119,15,"ast"],[136,16,119,18],[136,17,119,19,"children"],[136,25,119,27],[136,26,119,28],[136,27,119,29],[136,28,119,30],[136,32,119,34],[136,36,119,38],[137,4,120,4],[137,5,120,5],[137,6,121,4],[137,13,121,11,"error"],[137,18,121,16],[137,20,121,18],[138,6,122,8,"console"],[138,13,122,15],[138,14,122,16,"warn"],[138,18,122,20],[138,19,122,21],[138,39,122,41],[138,41,122,43,"error"],[138,46,122,48],[138,47,122,49],[139,6,123,8],[139,13,123,15],[140,8,124,12,"type"],[140,12,124,16],[140,14,124,18],[140,25,124,29],[141,8,125,12,"children"],[141,16,125,20],[141,18,125,22],[141,19,125,23],[142,10,125,25,"type"],[142,14,125,29],[142,16,125,31],[142,22,125,37],[143,10,125,39,"value"],[143,15,125,44],[143,17,125,46,"content"],[144,8,125,54],[144,9,125,55],[145,6,126,8],[145,7,126,9],[146,4,127,4],[147,2,128,0],[148,2,129,0],[149,0,130,0],[150,0,131,0],[151,0,132,0],[152,0,133,0],[153,0,134,0],[154,2,135,7],[154,11,135,16,"parseBlocks"],[154,22,135,27,"parseBlocks"],[154,23,135,28,"markdown"],[154,31,135,36],[154,33,135,38],[155,4,136,4],[155,10,136,10,"ast"],[155,13,136,13],[155,16,136,16,"parseMarkdown"],[155,29,136,29],[155,30,136,30,"markdown"],[155,38,136,38],[155,39,136,39],[156,4,137,4],[156,11,137,11,"ast"],[156,14,137,14],[156,15,137,15,"children"],[156,23,137,23],[157,2,138,0],[158,2,139,0],[159,0,140,0],[160,0,141,0],[161,0,142,0],[162,0,143,0],[163,0,144,0],[164,0,145,0],[165,2,146,7],[165,11,146,16,"isValidMarkdown"],[165,26,146,31,"isValidMarkdown"],[165,27,146,32,"markdown"],[165,35,146,40],[165,37,146,42],[166,4,147,4],[166,8,147,8],[167,6,148,8,"processor"],[167,15,148,17],[167,16,148,18,"parse"],[167,21,148,23],[167,22,148,24,"markdown"],[167,30,148,32],[167,31,148,33],[168,6,149,8],[168,13,149,15],[168,17,149,19],[169,4,150,4],[169,5,150,5],[169,6,151,4],[169,12,151,10],[170,6,152,8],[170,13,152,15],[170,18,152,20],[171,4,153,4],[172,2,154,0],[173,0,154,1],[173,3]],"functionMap":{"names":["<global>","isUnindentedListMarker","isHorizontalRule","escapeSetextUnderlines","lines.map$argument_0","parseMarkdown","parseBlockContent","parseBlocks","isValidMarkdown"],"mappings":"AAA;AC8B;CDE;AEI;CFK;OG0B;qBCE;KDc;CHC;OKU;CLS;OMQ;CNgB;OOO;CPG;OQQ;CRQ"},"hasCjsExports":false},"type":"js/module"}]}