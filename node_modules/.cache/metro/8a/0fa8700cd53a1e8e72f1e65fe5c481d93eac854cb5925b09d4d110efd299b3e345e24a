{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":1},"end":{"line":2,"column":46,"index":47}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":48},"end":{"line":3,"column":37,"index":85}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"./useAuth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":86},"end":{"line":4,"column":36,"index":122}}],"key":"YodAOaK/lIo8hkNYecbkSd+4iyQ=","exportNames":["*"],"imports":1}},{"name":"../utils/locationUtils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":123},"end":{"line":5,"column":82,"index":205}}],"key":"JDvOrab5tlThoH3k3LzqJMnKrVw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useLocation\", {\n    enumerable: true,\n    get: function () {\n      return useLocation;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  var _useAuth2 = require(_dependencyMap[4], \"./useAuth\");\n  var _utilsLocationUtils = require(_dependencyMap[5], \"../utils/locationUtils\");\n  var useLocation = () => {\n    _s();\n    var _useAuth = (0, _useAuth2.useAuth)(),\n      user = _useAuth.user,\n      updateUserProfile = _useAuth.updateUserProfile;\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      requestingPermission = _useState2[0],\n      setRequestingPermission = _useState2[1];\n\n    // FIXED: Only request location when user explicitly taps a button\n    var requestLocation = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      console.log('useLocation: User explicitly requested location permission');\n      if (!user) {\n        console.log('useLocation: No user found, cannot request location');\n        _reactNative.Alert.alert('Error', 'You must be logged in to enable location services.');\n        return;\n      }\n      setRequestingPermission(true);\n      try {\n        console.log('useLocation: Calling requestLocationPermission');\n        var result = yield (0, _utilsLocationUtils.requestLocationPermission)();\n        if (result.granted && result.latitude && result.longitude) {\n          console.log('useLocation: Permission granted, updating user profile with location');\n          yield updateUserProfile({\n            latitude: result.latitude,\n            longitude: result.longitude,\n            locationEnabled: true,\n            locationPermissionRequested: true\n          });\n          _reactNative.Alert.alert('Success', 'Location saved! You can now see nearby courts.');\n        } else {\n          console.log('useLocation: Permission denied or location unavailable');\n          yield updateUserProfile({\n            locationPermissionRequested: true\n          });\n          _reactNative.Alert.alert('Location Access Denied', 'You can still use PickleRadar by searching for courts using a ZIP code.');\n        }\n      } catch (error) {\n        console.error('useLocation: Error requesting location:', error);\n        _reactNative.Alert.alert('Location Error', 'Unable to access location. You can still search by ZIP code.');\n        try {\n          yield updateUserProfile({\n            locationPermissionRequested: true\n          });\n        } catch (updateError) {\n          console.error('useLocation: Error updating permission status:', updateError);\n        }\n      } finally {\n        setRequestingPermission(false);\n      }\n    }), [user, updateUserProfile]);\n    var updateZipCode = /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* (zipCode) {\n        if (!user) return {\n          success: false,\n          error: 'Not logged in'\n        };\n        try {\n          console.log('useLocation: Geocoding ZIP code:', zipCode);\n          var result = yield (0, _utilsLocationUtils.geocodeZipCode)(zipCode);\n          if (result.success && result.latitude && result.longitude) {\n            console.log('useLocation: ZIP code geocoded successfully');\n            yield updateUserProfile({\n              zipCode,\n              latitude: result.latitude,\n              longitude: result.longitude\n            });\n            return {\n              success: true\n            };\n          } else {\n            console.log('useLocation: ZIP code geocoding failed:', result.error);\n            return {\n              success: false,\n              error: result.error || 'Invalid ZIP code'\n            };\n          }\n        } catch (error) {\n          console.error('useLocation: Error updating ZIP code:', error);\n          return {\n            success: false,\n            error: 'Failed to update ZIP code'\n          };\n        }\n      });\n      return function updateZipCode(_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    return {\n      requestLocation,\n      updateZipCode,\n      requestingPermission,\n      hasLocation: !!(user?.latitude && user?.longitude),\n      userLocation: user?.latitude && user?.longitude ? {\n        latitude: user.latitude,\n        longitude: user.longitude\n      } : null\n    };\n  };\n  _s(useLocation, \"tHyiFw9V6N3ZNRVEyoi45HDvSpQ=\", false, function () {\n    return [_useAuth2.useAuth];\n  });\n});","lineCount":131,"map":[[13,2,7,0,"Object"],[13,8,7,0],[13,9,7,0,"defineProperty"],[13,23,7,0],[13,24,7,0,"exports"],[13,31,7,0],[14,4,7,0,"enumerable"],[14,14,7,0],[15,4,7,0,"get"],[15,7,7,0],[15,18,7,0,"get"],[15,19,7,0],[16,6,7,0],[16,13,7,0,"useLocation"],[16,24,7,0],[17,4,7,0],[18,2,7,0],[19,2,94,2],[19,6,94,2,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,94,2],[19,45,94,2,"require"],[19,52,94,2],[19,53,94,2,"_dependencyMap"],[19,67,94,2],[20,2,94,2],[20,6,94,2,"_asyncToGenerator"],[20,23,94,2],[20,26,94,2,"_interopDefault"],[20,41,94,2],[20,42,94,2,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,94,2],[21,2,94,2],[21,6,94,2,"_babelRuntimeHelpersSlicedToArray"],[21,39,94,2],[21,42,94,2,"require"],[21,49,94,2],[21,50,94,2,"_dependencyMap"],[21,64,94,2],[22,2,94,2],[22,6,94,2,"_slicedToArray"],[22,20,94,2],[22,23,94,2,"_interopDefault"],[22,38,94,2],[22,39,94,2,"_babelRuntimeHelpersSlicedToArray"],[22,72,94,2],[23,2,2,0],[23,6,2,0,"_react"],[23,12,2,0],[23,15,2,0,"require"],[23,22,2,0],[23,23,2,0,"_dependencyMap"],[23,37,2,0],[24,2,3,0],[24,6,3,0,"_reactNative"],[24,18,3,0],[24,21,3,0,"require"],[24,28,3,0],[24,29,3,0,"_dependencyMap"],[24,43,3,0],[25,2,4,0],[25,6,4,0,"_useAuth2"],[25,15,4,0],[25,18,4,0,"require"],[25,25,4,0],[25,26,4,0,"_dependencyMap"],[25,40,4,0],[26,2,5,0],[26,6,5,0,"_utilsLocationUtils"],[26,25,5,0],[26,28,5,0,"require"],[26,35,5,0],[26,36,5,0,"_dependencyMap"],[26,50,5,0],[27,2,7,7],[27,6,7,13,"useLocation"],[27,17,7,24],[27,20,7,27,"useLocation"],[27,21,7,27],[27,26,7,33],[28,4,7,33,"_s"],[28,6,7,33],[29,4,8,2],[29,8,8,2,"_useAuth"],[29,16,8,2],[29,19,8,38],[29,23,8,38,"useAuth"],[29,32,8,45],[29,33,8,45,"useAuth"],[29,40,8,45],[29,42,8,46],[29,43,8,47],[30,6,8,10,"user"],[30,10,8,14],[30,13,8,14,"_useAuth"],[30,21,8,14],[30,22,8,10,"user"],[30,26,8,14],[31,6,8,16,"updateUserProfile"],[31,23,8,33],[31,26,8,33,"_useAuth"],[31,34,8,33],[31,35,8,16,"updateUserProfile"],[31,52,8,33],[32,4,9,2],[32,8,9,2,"_useState"],[32,17,9,2],[32,20,9,58],[32,24,9,58,"useState"],[32,30,9,66],[32,31,9,66,"useState"],[32,39,9,66],[32,41,9,67],[32,46,9,72],[32,47,9,73],[33,6,9,73,"_useState2"],[33,16,9,73],[33,23,9,73,"_slicedToArray"],[33,37,9,73],[33,38,9,73,"default"],[33,45,9,73],[33,47,9,73,"_useState"],[33,56,9,73],[34,6,9,9,"requestingPermission"],[34,26,9,29],[34,29,9,29,"_useState2"],[34,39,9,29],[35,6,9,31,"setRequestingPermission"],[35,29,9,54],[35,32,9,54,"_useState2"],[35,42,9,54],[37,4,11,2],[38,4,12,2],[38,8,12,8,"requestLocation"],[38,23,12,23],[38,26,12,26],[38,30,12,26,"useCallback"],[38,36,12,37],[38,37,12,37,"useCallback"],[38,48,12,37],[38,67,12,37,"_asyncToGenerator"],[38,84,12,37],[38,85,12,37,"default"],[38,92,12,37],[38,94,12,38],[38,107,12,50],[39,6,13,4,"console"],[39,13,13,11],[39,14,13,12,"log"],[39,17,13,15],[39,18,13,16],[39,78,13,76],[39,79,13,77],[40,6,14,4],[40,10,14,8],[40,11,14,9,"user"],[40,15,14,13],[40,17,14,15],[41,8,15,6,"console"],[41,15,15,13],[41,16,15,14,"log"],[41,19,15,17],[41,20,15,18],[41,73,15,71],[41,74,15,72],[42,8,16,6,"Alert"],[42,20,16,11],[42,21,16,11,"Alert"],[42,26,16,11],[42,27,16,12,"alert"],[42,32,16,17],[42,33,16,18],[42,40,16,25],[42,42,16,27],[42,94,16,79],[42,95,16,80],[43,8,17,6],[44,6,18,4],[45,6,20,4,"setRequestingPermission"],[45,29,20,27],[45,30,20,28],[45,34,20,32],[45,35,20,33],[46,6,22,4],[46,10,22,8],[47,8,23,6,"console"],[47,15,23,13],[47,16,23,14,"log"],[47,19,23,17],[47,20,23,18],[47,68,23,66],[47,69,23,67],[48,8,24,6],[48,12,24,12,"result"],[48,18,24,18],[48,27,24,27],[48,31,24,27,"requestLocationPermission"],[48,50,24,52],[48,51,24,52,"requestLocationPermission"],[48,76,24,52],[48,78,24,53],[48,79,24,54],[49,8,26,6],[49,12,26,10,"result"],[49,18,26,16],[49,19,26,17,"granted"],[49,26,26,24],[49,30,26,28,"result"],[49,36,26,34],[49,37,26,35,"latitude"],[49,45,26,43],[49,49,26,47,"result"],[49,55,26,53],[49,56,26,54,"longitude"],[49,65,26,63],[49,67,26,65],[50,10,27,8,"console"],[50,17,27,15],[50,18,27,16,"log"],[50,21,27,19],[50,22,27,20],[50,92,27,90],[50,93,27,91],[51,10,28,8],[51,16,28,14,"updateUserProfile"],[51,33,28,31],[51,34,28,32],[52,12,29,10,"latitude"],[52,20,29,18],[52,22,29,20,"result"],[52,28,29,26],[52,29,29,27,"latitude"],[52,37,29,35],[53,12,30,10,"longitude"],[53,21,30,19],[53,23,30,21,"result"],[53,29,30,27],[53,30,30,28,"longitude"],[53,39,30,37],[54,12,31,10,"locationEnabled"],[54,27,31,25],[54,29,31,27],[54,33,31,31],[55,12,32,10,"locationPermissionRequested"],[55,39,32,37],[55,41,32,39],[56,10,33,8],[56,11,33,9],[56,12,33,10],[57,10,34,8,"Alert"],[57,22,34,13],[57,23,34,13,"Alert"],[57,28,34,13],[57,29,34,14,"alert"],[57,34,34,19],[57,35,34,20],[57,44,34,29],[57,46,34,31],[57,94,34,79],[57,95,34,80],[58,8,35,6],[58,9,35,7],[58,15,35,13],[59,10,36,8,"console"],[59,17,36,15],[59,18,36,16,"log"],[59,21,36,19],[59,22,36,20],[59,78,36,76],[59,79,36,77],[60,10,37,8],[60,16,37,14,"updateUserProfile"],[60,33,37,31],[60,34,37,32],[61,12,37,34,"locationPermissionRequested"],[61,39,37,61],[61,41,37,63],[62,10,37,68],[62,11,37,69],[62,12,37,70],[63,10,38,8,"Alert"],[63,22,38,13],[63,23,38,13,"Alert"],[63,28,38,13],[63,29,38,14,"alert"],[63,34,38,19],[63,35,39,10],[63,59,39,34],[63,61,40,10],[63,134,41,8],[63,135,41,9],[64,8,42,6],[65,6,43,4],[65,7,43,5],[65,8,43,6],[65,15,43,13,"error"],[65,20,43,18],[65,22,43,20],[66,8,44,6,"console"],[66,15,44,13],[66,16,44,14,"error"],[66,21,44,19],[66,22,44,20],[66,63,44,61],[66,65,44,63,"error"],[66,70,44,68],[66,71,44,69],[67,8,45,6,"Alert"],[67,20,45,11],[67,21,45,11,"Alert"],[67,26,45,11],[67,27,45,12,"alert"],[67,32,45,17],[67,33,46,8],[67,49,46,24],[67,51,47,8],[67,113,48,6],[67,114,48,7],[68,8,49,6],[68,12,49,10],[69,10,50,8],[69,16,50,14,"updateUserProfile"],[69,33,50,31],[69,34,50,32],[70,12,50,34,"locationPermissionRequested"],[70,39,50,61],[70,41,50,63],[71,10,50,68],[71,11,50,69],[71,12,50,70],[72,8,51,6],[72,9,51,7],[72,10,51,8],[72,17,51,15,"updateError"],[72,28,51,26],[72,30,51,28],[73,10,52,8,"console"],[73,17,52,15],[73,18,52,16,"error"],[73,23,52,21],[73,24,52,22],[73,72,52,70],[73,74,52,72,"updateError"],[73,85,52,83],[73,86,52,84],[74,8,53,6],[75,6,54,4],[75,7,54,5],[75,16,54,14],[76,8,55,6,"setRequestingPermission"],[76,31,55,29],[76,32,55,30],[76,37,55,35],[76,38,55,36],[77,6,56,4],[78,4,57,2],[78,5,57,3],[78,8,57,5],[78,9,57,6,"user"],[78,13,57,10],[78,15,57,12,"updateUserProfile"],[78,32,57,29],[78,33,57,30],[78,34,57,31],[79,4,59,2],[79,8,59,8,"updateZipCode"],[79,21,59,21],[80,6,59,21],[80,10,59,21,"_ref2"],[80,15,59,21],[80,22,59,21,"_asyncToGenerator"],[80,39,59,21],[80,40,59,21,"default"],[80,47,59,21],[80,49,59,24],[80,60,59,31,"zipCode"],[80,67,59,46],[80,69,59,51],[81,8,60,4],[81,12,60,8],[81,13,60,9,"user"],[81,17,60,13],[81,19,60,15],[81,26,60,22],[82,10,60,24,"success"],[82,17,60,31],[82,19,60,33],[82,24,60,38],[83,10,60,40,"error"],[83,15,60,45],[83,17,60,47],[84,8,60,63],[84,9,60,64],[85,8,62,4],[85,12,62,8],[86,10,63,6,"console"],[86,17,63,13],[86,18,63,14,"log"],[86,21,63,17],[86,22,63,18],[86,56,63,52],[86,58,63,54,"zipCode"],[86,65,63,61],[86,66,63,62],[87,10,64,6],[87,14,64,12,"result"],[87,20,64,18],[87,29,64,27],[87,33,64,27,"geocodeZipCode"],[87,52,64,41],[87,53,64,41,"geocodeZipCode"],[87,67,64,41],[87,69,64,42,"zipCode"],[87,76,64,49],[87,77,64,50],[88,10,66,6],[88,14,66,10,"result"],[88,20,66,16],[88,21,66,17,"success"],[88,28,66,24],[88,32,66,28,"result"],[88,38,66,34],[88,39,66,35,"latitude"],[88,47,66,43],[88,51,66,47,"result"],[88,57,66,53],[88,58,66,54,"longitude"],[88,67,66,63],[88,69,66,65],[89,12,67,8,"console"],[89,19,67,15],[89,20,67,16,"log"],[89,23,67,19],[89,24,67,20],[89,69,67,65],[89,70,67,66],[90,12,68,8],[90,18,68,14,"updateUserProfile"],[90,35,68,31],[90,36,68,32],[91,14,69,10,"zipCode"],[91,21,69,17],[92,14,70,10,"latitude"],[92,22,70,18],[92,24,70,20,"result"],[92,30,70,26],[92,31,70,27,"latitude"],[92,39,70,35],[93,14,71,10,"longitude"],[93,23,71,19],[93,25,71,21,"result"],[93,31,71,27],[93,32,71,28,"longitude"],[94,12,72,8],[94,13,72,9],[94,14,72,10],[95,12,73,8],[95,19,73,15],[96,14,73,17,"success"],[96,21,73,24],[96,23,73,26],[97,12,73,31],[97,13,73,32],[98,10,74,6],[98,11,74,7],[98,17,74,13],[99,12,75,8,"console"],[99,19,75,15],[99,20,75,16,"log"],[99,23,75,19],[99,24,75,20],[99,65,75,61],[99,67,75,63,"result"],[99,73,75,69],[99,74,75,70,"error"],[99,79,75,75],[99,80,75,76],[100,12,76,8],[100,19,76,15],[101,14,76,17,"success"],[101,21,76,24],[101,23,76,26],[101,28,76,31],[102,14,76,33,"error"],[102,19,76,38],[102,21,76,40,"result"],[102,27,76,46],[102,28,76,47,"error"],[102,33,76,52],[102,37,76,56],[103,12,76,75],[103,13,76,76],[104,10,77,6],[105,8,78,4],[105,9,78,5],[105,10,78,6],[105,17,78,13,"error"],[105,22,78,18],[105,24,78,20],[106,10,79,6,"console"],[106,17,79,13],[106,18,79,14,"error"],[106,23,79,19],[106,24,79,20],[106,63,79,59],[106,65,79,61,"error"],[106,70,79,66],[106,71,79,67],[107,10,80,6],[107,17,80,13],[108,12,80,15,"success"],[108,19,80,22],[108,21,80,24],[108,26,80,29],[109,12,80,31,"error"],[109,17,80,36],[109,19,80,38],[110,10,80,66],[110,11,80,67],[111,8,81,4],[112,6,82,2],[112,7,82,3],[113,6,82,3],[113,22,59,8,"updateZipCode"],[113,35,59,21,"updateZipCode"],[113,36,59,21,"_x"],[113,38,59,21],[114,8,59,21],[114,15,59,21,"_ref2"],[114,20,59,21],[114,21,59,21,"apply"],[114,26,59,21],[114,33,59,21,"arguments"],[114,42,59,21],[115,6,59,21],[116,4,59,21],[116,7,82,3],[117,4,84,2],[117,11,84,9],[118,6,85,4,"requestLocation"],[118,21,85,19],[119,6,86,4,"updateZipCode"],[119,19,86,17],[120,6,87,4,"requestingPermission"],[120,26,87,24],[121,6,88,4,"hasLocation"],[121,17,88,15],[121,19,88,17],[121,20,88,18],[121,22,88,20,"user"],[121,26,88,24],[121,28,88,26,"latitude"],[121,36,88,34],[121,40,88,38,"user"],[121,44,88,42],[121,46,88,44,"longitude"],[121,55,88,53],[121,56,88,54],[122,6,89,4,"userLocation"],[122,18,89,16],[122,20,89,18,"user"],[122,24,89,22],[122,26,89,24,"latitude"],[122,34,89,32],[122,38,89,36,"user"],[122,42,89,40],[122,44,89,42,"longitude"],[122,53,89,51],[122,56,89,54],[123,8,90,6,"latitude"],[123,16,90,14],[123,18,90,16,"user"],[123,22,90,20],[123,23,90,21,"latitude"],[123,31,90,29],[124,8,91,6,"longitude"],[124,17,91,15],[124,19,91,17,"user"],[124,23,91,21],[124,24,91,22,"longitude"],[125,6,92,4],[125,7,92,5],[125,10,92,8],[126,4,93,2],[126,5,93,3],[127,2,94,0],[127,3,94,1],[128,2,94,2,"_s"],[128,4,94,2],[128,5,7,13,"useLocation"],[128,16,7,24],[129,4,7,24],[129,12,8,38,"useAuth"],[129,21,8,45],[129,22,8,45,"useAuth"],[129,29,8,45],[130,2,8,45],[131,0,8,45],[131,3]],"functionMap":{"names":["<global>","useLocation","requestLocation","updateZipCode"],"mappings":"AAA;2BCM;sCCK;GD6C;wBEE;GFuB;CDY"},"hasCjsExports":false},"type":"js/module"}]}